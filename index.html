<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Chatbot Welcome</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;600;700&display=swap" rel="stylesheet">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" />

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;700;900&display=swap" rel="stylesheet" />
  <link rel="apple-touch-icon" sizes="180x180" href="Profile1.png" />

  <!-- ‚úÖ Tailwind (Frame15 Fruit Slash UI). Preflight disabled to avoid affecting other frames. -->
  <script>
    window.tailwind = window.tailwind || {};
    window.tailwind.config = { corePlugins: { preflight: false } };
  </script>
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- ‚úÖ Import map (React + optional GenAI, as in the original web2) -->
  <script type="importmap">
  {
    "imports": {
      "@google/genai": "https://esm.sh/@google/genai@^1.37.0",
      "react": "https://esm.sh/react@^19.2.3",
      "react/": "https://esm.sh/react@^19.2.3/",
      "react-dom/": "https://esm.sh/react-dom@^19.2.3/"
    }
  }
  </script>

  <link rel="stylesheet" href="styles.css" />
    <!-- ‚úÖ MediaPipe Hands (for Fruit Slash game) -->
  <script src="https://cdn.jsdelivr.net/npm/@mediapipe/hands/hands.min.js" defer></script>
  <script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.js" defer></script>
  <script src="https://cdn.jsdelivr.net/npm/@mediapipe/drawing_utils/drawing_utils.js" defer></script>
  <script src="app.js" defer></script>
  <!-- ‚úÖ Font Awesome (Frame16 Settings UI) -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <!-- ‚úÖ Quicksand font (Frame16 Settings UI) -->
  <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    /* Frame16 slider styles (scoped) */
    #frame16{ font-family: 'Quicksand', sans-serif; background-color:#1a2538; overflow:hidden; }
    #frame16 input[type='range']{ -webkit-appearance:none; width:100%; background:transparent; }
    #frame16 input[type='range']::-webkit-slider-thumb{ -webkit-appearance:none; height:24px; width:24px; border-radius:50%; background:#BE8DFF; cursor:pointer; margin-top:-8px; border:3px solid #233047; box-shadow:0 0 15px rgba(190,141,255,0.4); }
    #frame16 input[type='range']::-webkit-slider-runnable-track{ width:100%; height:8px; cursor:pointer; background:rgba(190,141,255,0.2); border-radius:10px; }
  </style>
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet" />
</head>

<body>
  <!-- ‚úÖ BOOT LOADER -->
  <div class="boot-loader" id="bootLoader">
    <div class="boot-card">
      <div class="boot-title">Loading assets‚Ä¶</div>
      <div class="boot-sub">Preparing all pages for smooth transitions</div>
      <div class="boot-bar"><div id="bootBarFill"></div></div>
      <div class="boot-row">
        <div style="display:flex;align-items:center;gap:10px;">
          <div class="boot-spin"></div>
          <div id="bootStatus">Starting‚Ä¶</div>
        </div>
        <div id="bootPercent">0%</div>
      </div>
    </div>
  </div>

  <!-- ‚úÖ Delete confirm modal -->
  <div class="modal" id="deleteModal" aria-hidden="true">
    <div class="modal-card">
      <div class="modal-title">Delete this account?</div>
      <div class="modal-sub">This action cannot be undone.</div>
      <div class="modal-actions">
        <button class="modal-btn ghost" id="deleteCancelBtn" type="button">Cancel</button>
        <button class="modal-btn danger" id="deleteYesBtn" type="button">Yes, delete</button>
      </div>
    </div>
  </div>

  <!-- ‚úÖ WiFi Connect Modal (replaces BLE popup for Safari) -->
  <div class="wifi-modal" id="wifiModal" aria-hidden="true">
    <div class="wifi-card">
      <div class="wifi-title">Connect Sensor</div>
      <div class="wifi-sub">
        1) Go to Wi‚ÄëFi settings and connect to <b>FARALPHA</b><br/>
        2) Come back and press <b>Connect</b>
      </div>
      <div class="wifi-actions">
        <button class="wifi-btn ghost" id="wifiCancelBtn" type="button">Cancel</button>
        <button class="wifi-btn primary" id="wifiConnectBtn" type="button">Connect</button>
      </div>
      <div class="wifi-hint" id="wifiHint">Tip: keep this tab open while connecting.</div>
    </div>
  </div>

  <!-- ‚úÖ WiFi Connecting Overlay -->
  <div class="wifi-loading" id="wifiLoading" style="display:none;">
    <div class="wifi-loading-card">
      <div class="wifi-spin"></div>
      <div class="wifi-loading-text" id="wifiLoadingText">Connecting‚Ä¶</div>
    </div>
  </div>

  <!-- ‚úÖ Toast -->
  <div class="toast" id="toast" style="display:none;">Connected successfully.</div>


  <!-- VIDEO OVERLAY -->
  <div class="frame-video" id="frameVideo" style="display:none;">
    <video id="introVideo" autoplay muted loop playsinline preload="auto">
      <source src="Face.mp4" type="video/mp4">
      Your browser does not support the video tag.
    </video>
  </div>

  <!-- FRAME 1: Welcome -->
  <div class="frame-1">
    <div class="main-picture">
      <img src="Pic3.png" alt="Main Main Picture" loading="eager" decoding="async">
    </div>

    <div class="title">Welcome</div>

    <div class="subtitle">
      Let me help you. Your chatbot assistant
      is here to support you.
    </div>

    <div class="option-card option-card-1" id="welcomeOption1">
      <img src="Pic1.png" alt="Option 1" loading="eager" decoding="async">
    </div>

    <div class="option-card option-card-2" id="welcomeOption2">
      <img src="Pic2.png" alt="Option 2" loading="eager" decoding="async">
    </div>
  </div>

  <!-- FRAME 2: Carousel -->
  <div class="frame-2">
    <div class="frame2-close" id="frame2CloseBtn">
      <img src="Pic9.png" alt="Go to profile setup" decoding="async">
    </div>

    <div class="slider-wrapper">
      <div class="slider" id="slider">
        <div class="slide"><img src="Pic8.png" alt="Slide 1" decoding="async"></div>
        <div class="slide"><img src="Pic10.png" alt="Slide 2" decoding="async"></div>
        <div class="slide"><img src="Pic11.png" alt="Slide 3" decoding="async"></div>
      </div>
    </div>

    <div class="frame2-btn-left" id="btnLeft"><img src="Pic6.png" alt="Left button" decoding="async"></div>
    <div class="frame2-btn-right" id="btnRight"><img src="Pic7.png" alt="Right button" decoding="async"></div>

    <div class="frame2-dot frame2-dot-1" id="dot1"></div>
    <div class="frame2-dot frame2-dot-2" id="dot2"></div>
    <div class="frame2-dot frame2-dot-3" id="dot3"></div>
  </div>

  <!-- FRAME 3: Nickname + Profile icon -->
  <div class="frame-3">
    <div class="frame3-btn-left" id="frame3Back"><img src="Pic6.png" alt="Back to slides" decoding="async"></div>
    <div class="frame3-btn-right" id="frame3Next"><img src="Pic7.png" alt="Go to age select" decoding="async"></div>

    <div class="profile-avatar" id="avatarBtn">
      <img src="Pic13.png" alt="Profile Avatar" id="avatarImage" decoding="async">
    </div>

    <input type="text" class="nickname-input" id="nicknameInput" placeholder="Nickname" />
  </div>

  <!-- FRAME AVATAR -->
  <div class="frame-avatar" id="frameAvatar">
    <div class="profile-option profile-1"><img src="Profile1.png" alt="Profile 1" decoding="async"></div>
    <div class="profile-option profile-2"><img src="Profile2.png" alt="Profile 2" decoding="async"></div>
    <div class="profile-option profile-3"><img src="Profile3.png" alt="Profile 3" decoding="async"></div>
    <div class="profile-option profile-4"><img src="Profile4.png" alt="Profile 4" decoding="async"></div>
    <div class="profile-option profile-5"><img src="Profile5.png" alt="Profile 5" decoding="async"></div>
    <div class="profile-option profile-6"><img src="Profile6.png" alt="Profile 6" decoding="async"></div>
    <div class="profile-option profile-7"><img src="Profile7.png" alt="Profile 7" decoding="async"></div>
    <div class="profile-option profile-8"><img src="Profile8.png" alt="Profile 8" decoding="async"></div>
    <div class="profile-option profile-9"><img src="Profile9.png" alt="Profile 9" decoding="async"></div>
    <div class="profile-option profile-10"><img src="Profile10.png" alt="Profile 10" decoding="async"></div>
  </div>

  <!-- FRAME 4: Age wheel (0‚Äì140) -->
  <div class="frame-4" id="frame4">
    <div class="age-title">
      Select your age (0‚Äì140). We‚Äôll customize the assistant for you.
    </div>

    <div class="frame4-btn-left" id="frame4Back"><img src="Pic6.png" alt="Back to nickname" decoding="async"></div>
    <div class="frame4-btn-right" id="frame4Next"><img src="Pic7.png" alt="Next (age)" decoding="async"></div>

    <div class="age-wheel-panel" id="ageWheelPanel" aria-label="Age Wheel Panel">
      <div class="age-wheel-left">
        <div class="age-big" id="ageNumberBig">18</div>
        <div class="age-small" id="ageBandLabel">Young Adult Age: 18‚Äì24</div>
        <div class="age-tip">Swipe the wheel</div>
      </div>

      <div class="age-wheel-right">
        <div class="age-wheel" id="ageWheel" aria-label="Age Wheel"></div>
        <div class="age-wheel-highlight"></div>
      </div>
    </div>
  </div>

  <!-- FRAME 5: Well done + accounts -->
  <div class="frame-5" id="frame5">
    <div class="done-title">Well done!</div>
    <div class="done-subtitle">The assistant is ready for you to use.</div>
    <div class="profiles-list" id="profilesList"></div>
  </div>

<!-- FRAME 6: Home screen -->
<div class="frame-6" id="frame6">
  <div class="frame6-profile" id="frame6ProfileBtn">
    <img src="Pic13.png" alt="Profile" id="frame6ProfileImg" decoding="async">
  </div>

  <button class="frame6-bluetooth" id="frame6BluetoothBtn" type="button" aria-label="Bluetooth">
    <img src="Bluetooth.png" alt="Bluetooth" decoding="async">
  </button>

  <div class="frame6-tabs">
    <div class="frame6-tab-highlight" id="tabHighlight"></div>

    <div class="frame6-tab" id="tabHome">Home</div>
    <div class="frame6-tab" id="tabHealthcare">Healthcare</div>
    <div class="frame6-tab" id="tabSports">Sports&amp;Fitness</div>
    <div class="frame6-tab" id="tabEducation">Education</div>
    <div class="frame6-tab" id="tabCommunity">Community</div>
  </div>

  <div class="frame6-home-cards-wrapper" id="homeCards">
    <div class="frame6-home-cards" id="homeCardsTrack">

      <!-- ‚úÖ Chat cards (also shown on Home) -->
      <div class="frame6-card" data-home="1" data-card="healthcare" data-card-key="healthcare_chat">
        <!-- <img class="pin-header" src="Pin_Header.png" alt="Pinned" decoding="async"> -->
        <img src="Card1.png" alt="Healthcare card" decoding="async">

        <button class="frame6-card-menu" type="button" aria-label="Card menu">
          <span class="menu-circle"></span>
          <img src="Fix_Menu.png" alt="Menu" decoding="async">
        </button>

        <!-- <div class="frame6-card-menu-pop" role="menu">
          <button class="pin-toggle" type="button">
            <img class="pin-icon" src="Pin.png" alt="" decoding="async">
            <span class="pin-text">Pin</span>
          </button>
        </div> -->
      </div>

      <!-- ‚úÖ Quiz card for Healthcare (ONLY shown in Healthcare tab, order #2) -->
      <div class="frame6-card frame6-card-quiz" data-home="0" data-quiz="1" data-for-tab="healthcare" data-card-key="healthcare_quiz">
        <!-- <img class="pin-header" src="Pin_Header.png" alt="Pinned" decoding="async"> -->
        <img src="Card_Quiz1.png" alt="Healthcare Quiz" decoding="async">

        <button class="frame6-card-menu" type="button" aria-label="Card menu">
          <span class="menu-circle"></span>
          <img src="Fix_Menu.png" alt="Menu" decoding="async">
        </button>

        <!-- <div class="frame6-card-menu-pop" role="menu">
          <button class="pin-toggle" type="button">
            <img class="pin-icon" src="Pin.png" alt="" decoding="async">
            <span class="pin-text">Pin</span>
          </button>
        </div> -->
      </div>

      <div class="frame6-card" data-home="1" data-card="sports" data-card-key="sports_chat">
        <!-- <img class="pin-header" src="Pin_Header.png" alt="Pinned" decoding="async"> -->
        <img src="Card2.png" alt="Sports card" decoding="async">

        <button class="frame6-card-menu" type="button" aria-label="Card menu">
          <span class="menu-circle"></span>
          <img src="Fix_Menu.png" alt="Menu" decoding="async">
        </button>

        <!-- <div class="frame6-card-menu-pop" role="menu">
          <button class="pin-toggle" type="button">
            <img class="pin-icon" src="Pin.png" alt="" decoding="async">
            <span class="pin-text">Pin</span>
          </button>
        </div> -->
      </div>

      <div class="frame6-card frame6-card-quiz" data-home="0" data-quiz="1" data-for-tab="sports" data-card-key="sports_quiz">
        <!-- <img class="pin-header" src="Pin_Header.png" alt="Pinned" decoding="async"> -->
        <img src="Card_Quiz2.png" alt="Sports Quiz" decoding="async">

        <button class="frame6-card-menu" type="button" aria-label="Card menu">
          <span class="menu-circle"></span>
          <img src="Fix_Menu.png" alt="Menu" decoding="async">
        </button>

        <!-- <div class="frame6-card-menu-pop" role="menu">
          <button class="pin-toggle" type="button">
            <img class="pin-icon" src="Pin.png" alt="" decoding="async">
            <span class="pin-text">Pin</span>
          </button>
        </div> -->
      </div>

      <div class="frame6-card" data-home="1" data-card="education" data-card-key="education_chat">
        <!-- <img class="pin-header" src="Pin_Header.png" alt="Pinned" decoding="async"> -->
        <img src="Card3.png" alt="Education card" decoding="async">

        <button class="frame6-card-menu" type="button" aria-label="Card menu">
          <span class="menu-circle"></span>
          <img src="Fix_Menu.png" alt="Menu" decoding="async">
        </button>

        <!-- <div class="frame6-card-menu-pop" role="menu">
          <button class="pin-toggle" type="button">
            <img class="pin-icon" src="Pin.png" alt="" decoding="async">
            <span class="pin-text">Pin</span>
          </button>
        </div> -->
      </div>

      <div class="frame6-card frame6-card-quiz" data-home="0" data-quiz="1" data-for-tab="education" data-card-key="education_quiz">
        <!-- <img class="pin-header" src="Pin_Header.png" alt="Pinned" decoding="async"> -->
        <img src="Card_Quiz3.png" alt="Education Quiz" decoding="async">

        <button class="frame6-card-menu" type="button" aria-label="Card menu">
          <span class="menu-circle"></span>
          <img src="Fix_Menu.png" alt="Menu" decoding="async">
        </button>

        <!-- <div class="frame6-card-menu-pop" role="menu">
          <button class="pin-toggle" type="button">
            <img class="pin-icon" src="Pin.png" alt="" decoding="async">
            <span class="pin-text">Pin</span>
          </button>
        </div> -->
      </div>

      <!-- ‚úÖ Word Scramble game card (ONLY shown in Education tab, order #3) -->
      <div class="frame6-card frame6-card-game" data-home="0" data-game="scramble" data-for-tab="education" data-card-key="education_game_scramble">
        <!-- <img class="pin-header" src="Pin_Header.png" alt="Pinned" decoding="async"> -->
        <img src="Card_Game_Education1.png" alt="Scramble Game" decoding="async">

        <button class="frame6-card-menu" type="button" aria-label="Card menu">
          <span class="menu-circle"></span>
          <img src="Fix_Menu.png" alt="Menu" decoding="async">
        </button>

        <!-- <div class="frame6-card-menu-pop" role="menu">
          <button class="pin-toggle" type="button">
            <img class="pin-icon" src="Pin.png" alt="" decoding="async">
            <span class="pin-text">Pin</span>
          </button>
        </div> -->
      </div>

      <div class="frame6-card" data-home="1" data-card="community" data-card-key="community_chat"> <!-- FIX: Added Card 4 -->
        <!-- <img class="pin-header" src="Pin_Header.png" alt="Pinned" decoding="async"> -->
        <img src="Card4.png" alt="Community card" decoding="async">

        <button class="frame6-card-menu" type="button" aria-label="Card menu">
          <span class="menu-circle"></span>
          <img src="Fix_Menu.png" alt="Menu" decoding="async">
        </button>

        <!-- <div class="frame6-card-menu-pop" role="menu">
          <button class="pin-toggle" type="button">
            <img class="pin-icon" src="Pin.png" alt="" decoding="async">
            <span class="pin-text">Pin</span>
          </button>
        </div> -->
      </div>

      <div class="frame6-card frame6-card-quiz" data-home="0" data-quiz="1" data-for-tab="community" data-card-key="community_quiz">
        <!-- <img class="pin-header" src="Pin_Header.png" alt="Pinned" decoding="async"> -->
        <img src="Card_Quiz4.png" alt="Community Quiz" decoding="async">

        <button class="frame6-card-menu" type="button" aria-label="Card menu">
          <span class="menu-circle"></span>
          <img src="Fix_Menu.png" alt="Menu" decoding="async">
        </button>

        <!-- <div class="frame6-card-menu-pop" role="menu">
          <button class="pin-toggle" type="button">
            <img class="pin-icon" src="Pin.png" alt="" decoding="async">
            <span class="pin-text">Pin</span>
          </button>
        </div> -->
      </div>

      <!-- ‚úÖ Tic Tac Toe game card (ONLY shown in Community tab, order #3) -->
      <div class="frame6-card frame6-card-game" data-home="0" data-game="ttt" data-for-tab="community" data-card-key="community_game_ttt">
        <!-- <img class="pin-header" src="Pin_Header.png" alt="Pinned" decoding="async"> -->
        <img src="Card_Game_Community1.png" alt="TicTacToe Game" decoding="async">

        <button class="frame6-card-menu" type="button" aria-label="Card menu">
          <span class="menu-circle"></span>
          <img src="Fix_Menu.png" alt="Menu" decoding="async">
        </button>

        <!-- <div class="frame6-card-menu-pop" role="menu">
          <button class="pin-toggle" type="button">
            <img class="pin-icon" src="Pin.png" alt="" decoding="async">
            <span class="pin-text">Pin</span>
          </button>
        </div> -->
      </div>

        <!-- Card 4: Fruit Slash Game Card -->
        <div class="frame6-card frame6-card-game" data-home="0" data-game="fruit" data-for-tab="community" data-card-key="community_game_fruit">
            <img src="Card_Game_Community2.png" alt="Fruit Slash Game" decoding="async">
          
          <button class="frame6-card-menu" type="button" aria-label="Card menu">
            <span class="menu-circle"></span>
            <img src="Fix_Menu.png" alt="Menu" decoding="async">
          </button>

        <!-- <div class="frame6-card-menu-pop" role="menu">
          <button class="pin-toggle" type="button">
            <img class="pin-icon" src="Pin.png" alt="" decoding="async">
            <span class="pin-text">Pin</span>
          </button>
        </div> -->
      </div>



      <!-- Card 5: Flappy Bird Game Card (Frame18) -->
      <div class="frame6-card frame6-card-game" data-home="0" data-game="flappy" data-for-tab="community" data-card-key="community_game_flappy">
        <img src="Card_Game_Community3.png" alt="Flappy Bird Game" decoding="async">

        <button class="frame6-card-menu" type="button" aria-label="Card menu">
          <span class="menu-circle"></span>
          <img src="Fix_Menu.png" alt="Menu" decoding="async">
        </button>
      </div>

      <!-- Home-only extras -->
      <div class="frame6-card" data-home="1" data-card-key="home_extra_5">
        <!-- <img class="pin-header" src="Pin_Header.png" alt="Pinned" decoding="async"> -->
        <img src="Card5.png" alt="Card 5" decoding="async">

        <button class="frame6-card-menu" type="button" aria-label="Card menu">
          <span class="menu-circle"></span>
          <img src="Fix_Menu.png" alt="Menu" decoding="async">
        </button>

        <!-- <div class="frame6-card-menu-pop" role="menu">
          <button class="pin-toggle" type="button">
            <img class="pin-icon" src="Pin.png" alt="" decoding="async">
            <span class="pin-text">Pin</span>
          </button>
        </div> -->
      </div>

      <div class="frame6-card" data-home="1" data-card-key="home_extra_6" data-game="settings">
        <!-- <img class="pin-header" src="Pin_Header.png" alt="Pinned" decoding="async"> -->
        <img src="Card6.png" alt="Card 6" decoding="async">

        <button class="frame6-card-menu" type="button" aria-label="Card menu">
          <span class="menu-circle"></span>
          <img src="Fix_Menu.png" alt="Menu" decoding="async">
        </button>

        <!-- <div class="frame6-card-menu-pop" role="menu">
          <button class="pin-toggle" type="button">
            <img class="pin-icon" src="Pin.png" alt="" decoding="async">
            <span class="pin-text">Pin</span>
          </button>
        </div> -->
      </div>

    </div>
  </div>
</div>

  <!-- FRAME 7: Chatbot -->
  <div class="frame-7" id="frame7">
    <div class="stage" id="chatStage">
      <div class="history-label" id="threadHeader">History</div>

      <div class="chat-threads-controls">
        <button class="mini-btn" id="newChatBtn" type="button">+ New</button>
      </div>

      <div class="chat-threads-panel show" id="threadsPanel">
        <div class="threads-head">
          <div class="threads-title" id="threadsTitle">History</div>
        </div>
        <div class="threads-list" id="threadsList"></div>
      </div>

      <div class="chat-back" id="chatBackBtn" title="Go back">
        <img src="ChatBot_GoBack.png" alt="Go Back" decoding="async">
      </div>

      <div class="chat-title" id="chatTitle">HealthCare Chatbot</div>
      <div class="chat-history" id="chatHistory"></div>

      <div class="chat-bottom">
        <div class="tap-to-ask" id="tapToAsk">Tap to ask</div>

        <div class="input-wrap">
          <input class="chat-input" id="chatInput" autocomplete="off" />
        </div>

        <div class="chat-icon" id="chatAdd"><img id="chatAddImg" src="ChatBot_Add.png" alt="Add" decoding="async"></div>

        <div class="mic-lang" id="micLangWrap" title="Mic language">
          <button class="mic-lang-btn" id="micLangBtn" type="button">EN</button>
          <div class="mic-lang-menu" id="micLangMenu">
            <div class="mic-lang-item" data-lang="en-US">EN</div>
            <div class="mic-lang-item" data-lang="th-TH">TH</div>
          </div>
        </div>

        <div class="chat-icon" id="chatMic"><img id="chatMicImg" src="ChatBot_Mic.png" alt="Mic" decoding="async"></div>
        <div class="chat-icon" id="chatSend"><img id="chatSendImg" src="ChatBot_Send.png" alt="Send" decoding="async"></div>

        <div class="voice-center" id="voiceCenter">
          <div class="voice-pill">
            <div class="voice-time" id="voiceTime">00:00</div>
            <div class="voice-wave" id="voiceWave">‚ñÇ‚ñÉ‚ñÖ‚ñÜ‚ñÖ‚ñÉ‚ñÇ</div>
          </div>
        </div>

        <input type="file" id="filePicker" class="hidden" multiple />
      </div>
    </div>
  </div>

  <!-- ‚úÖ FRAME 8: QUIZ SETUP -->
  <div class="frame-8" id="frame8">
    <div class="quiz-stage" id="quizStageSetup">
      <div class="quiz-back" id="quizBackBtn1" title="Go back">
        <img src="ChatBot_GoBack.png" alt="Go Back" decoding="async">
      </div>

      <div class="quiz-title" id="quizSetupTitle">Healthcare Quiz</div>

      <div class="quiz-panel">
        <div class="quiz-row">
          <div class="quiz-label" id="quizTopicLabel">Enter a Healthcare quiz topic</div>
          <input class="quiz-input" id="quizTopicInput" placeholder="e.g., First aid basics, Nutrition, Sleep habits" />
        </div>

        <div class="quiz-grid">
          <div class="quiz-row">
            <div class="quiz-label">Number of questions</div>
            <select class="quiz-select" id="quizCountSelect">
              <option value="5">5</option>
              <option value="8" selected>8</option>
              <option value="10">10</option>
              <option value="12">12</option>
            </select>
          </div>

          <div class="quiz-row">
            <div class="quiz-label">Grade / Level</div>
            <select class="quiz-select" id="quizGradeSelect">
              <option value="Auto (based on age)" selected>Auto (based on age)</option>
              <option value="Kindergarten">Kindergarten</option>
              <option value="Grade 1‚Äì3">Grade 1‚Äì3</option>
              <option value="Grade 4‚Äì6">Grade 4‚Äì6</option>
              <option value="Grade 7‚Äì9">Grade 7‚Äì9</option>
              <option value="Grade 10‚Äì12">Grade 10‚Äì12</option>
              <option value="University">University</option>
              <option value="Professional">Professional</option>
            </select>
          </div>

          <div class="quiz-row">
            <div class="quiz-label">Difficulty</div>
            <select class="quiz-select" id="quizDifficultySelect">
              <option value="Easy">Easy</option>
              <option value="Medium" selected>Medium</option>
              <option value="Hard">Hard</option>
            </select>
          </div>

          <div class="quiz-row">
            <div class="quiz-label">Timer</div>
            <select class="quiz-select" id="quizTimerSelect">
              <option value="0">No timer</option>
              <option value="30">30 sec / question</option>
              <option value="45">45 sec / question</option>
              <option value="60" selected>60 sec / question</option>
              <option value="90">90 sec / question</option>
            </select>
          </div>
        </div>

        <button class="quiz-primary" id="quizStartBtn" type="button">Start Quiz</button>

        <div class="quiz-hint" id="quizSetupHint">Tip: Choose a topic and press Start. The AI will generate the quiz for you.</div>
      </div>
    </div>
  </div>

  <!-- ‚úÖ FRAME 9: QUIZ PLAY -->
  <div class="frame-9" id="frame9">
    <div class="quiz-stage" id="quizStagePlay">
      <div class="quiz-back" id="quizBackBtn2" title="Go back">
        <img src="ChatBot_GoBack.png" alt="Go Back" decoding="async">
      </div>

      <div class="quiz-topbar">
        <div class="quiz-pill" id="quizProgress">Q1 / 10</div>
        <div class="quiz-pill" id="quizTimerPill">00:00</div>
      </div>

      <div class="quiz-card">
        <div class="quiz-q" id="quizQuestionText">Loading‚Ä¶</div>
        <div class="quiz-choices" id="quizChoices"></div>

        <div class="quiz-actions">
          <button class="quiz-secondary" id="quizNextBtn" type="button" disabled>Next</button>
        </div>

        <div class="quiz-feedback" id="quizFeedback"></div>
      </div>
    </div>
  </div>

  <!-- ‚úÖ FRAME 10: QUIZ RESULT -->
  <div class="frame-10" id="frame10">
    <div class="quiz-stage" id="quizStageResult">
      <div class="quiz-back" id="quizBackBtn3" title="Go back">
        <img src="ChatBot_GoBack.png" alt="Go Back" decoding="async">
      </div>

      <div class="quiz-title" id="quizResultTitle">Results</div>

      <div class="quiz-panel">
        <div class="quiz-score" id="quizScoreText">Score: 8 / 10</div>
        <div class="quiz-congrats" id="quizCongratsText">Congratulations! üéâ</div>

        <div class="quiz-result-actions">
          <button class="quiz-secondary" id="quizPlayAgainBtn" type="button">Play again</button>
          <button class="quiz-primary" id="quizBackHomeBtn" type="button">Back to Home</button>
        </div>
      </div>
    </div>
  </div>

    <!-- ‚úÖ FRAME 11: WORD SCRAMBLE SETUP -->
  <div class="frame-11" id="frame11">
    <div class="game-stage" id="scrambleStageSetup">
      <div class="game-back" id="scrambleBackBtn1"><img src="ChatBot_GoBack.png" alt="Back"></div>
      <div class="game-title" id="scrambleSetupTitle">Word Scramble</div>

      <div class="game-panel">
        <div class="game-row">
          <div class="game-label">Topic</div>
          <input class="game-input" id="scrambleTopicInput" placeholder="e.g., Biology, Football, SAT words">
        </div>

        <div class="quiz-grid">
          <div class="game-row">
            <div class="game-label">Words</div>
            <select class="game-select" id="scrambleCountSelect">
              <option value="6">6</option>
              <option value="8" selected>8</option>
              <option value="10">10</option>
              <option value="12">12</option>
            </select>
          </div>

          <div class="game-row">
            <div class="game-label">Difficulty</div>
            <select class="game-select" id="scrambleDifficultySelect">
              <option value="Easy">Easy</option>
              <option value="Medium" selected>Medium</option>
              <option value="Hard">Hard</option>
            </select>
          </div>

          <div class="game-row">
            <div class="game-label">Timer</div>
            <select class="game-select" id="scrambleTimerSelect">
              <option value="0" selected>No timer</option>
              <option value="20">20 sec / word</option>
              <option value="30">30 sec / word</option>
              <option value="45">45 sec / word</option>
              <option value="60">60 sec / word</option>
            </select>
          </div>
        </div>

        <button class="game-primary" id="scrambleStartBtn" type="button">Start Game</button>
        <div class="game-hint" id="scrambleSetupHint">Tip: choose a topic then Start.</div>
      </div>
    </div>
  </div>

  <!-- ‚úÖ FRAME 13: WORD SCRAMBLE PLAY -->
  <div class="frame-13" id="frame13">
    <div class="game-stage" id="scrambleStagePlay">
      <div class="game-back" id="scrambleBackBtn2"><img src="ChatBot_GoBack.png" alt="Back"></div>
      <div class="game-title">Word Scramble</div>

      <div class="game-topbar">
        <div class="game-pill" id="scrambleProgress">Word 1 / 8</div>
        <div class="game-pill" id="scrambleTimerPill">‚Äî</div>
      </div>

      <div class="game-card">
        <div class="scramble-word" id="scrambleWordText">LOADING</div>
        <div class="scramble-hint" id="scrambleHintText">Hint: ‚Äî</div>

        <input class="game-input" id="scrambleGuessInput" placeholder="Type your answer‚Ä¶">

        <div class="game-actions">
          <button class="game-secondary" id="scrambleCheckBtn" type="button">Check</button>
          <button class="game-secondary" id="scrambleNextBtn" type="button" disabled>Next</button>
        </div>

        <div class="game-feedback" id="scrambleFeedback"></div>
      </div>
    </div>
  </div>

  <!-- ‚úÖ FRAME 12: TIC TAC TOE SETUP -->
  <div class="frame-12" id="frame12">
    <div class="game-stage" id="tttStageSetup">
      <div class="game-back" id="tttBackBtn1"><img src="ChatBot_GoBack.png" alt="Back"></div>
      <div class="game-title" id="tttSetupTitle">Tic Tac Toe</div>

      <div class="game-panel">
        <div class="game-row">
          <div class="game-label">Mode</div>
          <div class="game-toggle">
            <button class="toggle-btn active" data-ttt-mode="1p" type="button">1 Player</button>
            <button class="toggle-btn" data-ttt-mode="2p" type="button">2 Players</button>
          </div>
        </div>

        <div class="game-row">
          <div class="game-label">Your side (1P)</div>
          <div class="game-toggle">
            <button class="toggle-btn active" data-ttt-side="X" type="button">X</button>
            <button class="toggle-btn" data-ttt-side="O" type="button">O</button>
          </div>
        </div>

        <div class="game-row">
          <div class="game-label">Difficulty (1P)</div>
          <select class="game-select" id="tttDiffSelect">
            <option value="Easy" selected>Easy</option>
            <option value="Medium">Medium</option>
            <option value="Hard">Hard</option>
          </select>
        </div>

        <button class="game-primary" id="tttStartBtn" type="button">Start Game</button>
        <div class="game-hint" id="tttSetupHint">Choose mode and press Start.</div>
      </div>
    </div>
  </div>

  <!-- ‚úÖ FRAME 14: TIC TAC TOE PLAY -->
  <div class="frame-14" id="frame14">
    <div class="game-stage" id="tttStagePlay">
      <div class="game-back" id="tttBackBtn2"><img src="ChatBot_GoBack.png" alt="Back"></div>
      <div class="game-title">Tic Tac Toe</div>

      <div class="game-topbar">
        <div class="game-pill" id="tttStatus">Turn: X</div>
      </div>

      <div class="game-card">
        <div class="ttt-grid" id="tttGrid"></div>
        <div class="game-actions">
          <button class="game-secondary" id="tttRestartBtn" type="button">Restart</button>
        </div>
      </div>
    </div>
  </div>


  <!-- =========================
       FRAME 15: Fruit Slash (copied from web2)
       ========================= -->
  <div class="frame-15" id="frame15" style="display:none;">
    <div id="fruitSlashRoot" style="width:100%;height:100%;"></div>
  </div>


  <!-- =========================
       FRAME 16: Settings (copied from web2)
       ========================= -->
  <div class="frame-16" id="frame16" style="display:none;">
    <div id="settingsRoot" style="width:100%;height:100%;"></div>
  </div>



  
  <!-- FRAME 17: Climate Buddy (copied from Web2) -->
  <div class="frame-17" id="frame17" style="display:none;">
    <div class="climateBuddy-body">
      <div id="climateBuddyRoot" class="climateBuddy-root">
        <div class="climateBuddy-app flex flex-col h-full w-full pt-6 px-10 pb-10 overflow-hidden relative select-none transform-gpu">
          <header class="flex items-center justify-between mb-8 flex-shrink-0">
            <div class="flex-1">
              <button id="climateBackBtn" class="group flex items-center justify-center w-10 h-10 glass rounded-2xl active:scale-90 transition-all border-white shadow-md hover:bg-sky-50" type="button" aria-label="Back">
                <svg class="w-5 h-5 text-slate-400 group-hover:text-sky-500 transition-colors" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M10 19l-7-7m0 0l7-7m-7 7h18" />
                </svg>
              </button>
            </div>

            <div class="flex items-center gap-3 bg-white/90 px-6 py-2 rounded-full border-2 border-white shadow-md transition-all group">
              <span id="climateConnDot" class="w-2.5 h-2.5 rounded-full bg-slate-300"></span>

              <!-- IMPORTANT: This button is display-only (disabled). BLE connect is handled from Frame6 -->
              <button id="climateConnBtn" class="text-[10px] font-bold tracking-[0.2em] uppercase transition-colors text-sky-500" type="button" disabled style="pointer-events:none;opacity:1;">
                CONNECT SENSOR
              </button>

              <div class="w-px h-4 bg-slate-200 mx-1"></div>
              <span id="climateTime" class="text-[10px] font-bold text-sky-500">--:--</span>
            </div>

            <div class="flex-1"></div>
          </header>

          <main class="flex-grow grid grid-cols-12 gap-6 min-h-0 items-stretch">
            <div class="col-span-3 flex flex-col gap-4">
              <div class="flex-1 min-h-0" id="climateGaugeTemp"></div>
              <div class="flex-1 min-h-0" id="climateGaugeHumid"></div>
            </div>

            <div class="col-span-5 flex flex-col h-full" id="climateChartWrap"></div>

            <div class="col-span-4 h-full">
              <div class="glass p-5 rounded-[40px] h-full flex flex-col overflow-hidden relative border-white shadow-xl shadow-sky-200/20">
                <div class="absolute -top-2 -right-2 text-4xl opacity-5 pointer-events-none rotate-12 text-sky-400">‚ú®</div>

                <div class="flex items-center justify-between mb-4 flex-shrink-0">
                  <div class="flex items-center gap-2">
                    <div class="p-2 bg-sky-50 rounded-2xl">
                      <span class="text-xl animate-bounce-slow">üêπ</span>
                    </div>
                    <span class="text-[10px] font-bold text-slate-500 uppercase tracking-widest bubbly-text">Cloudy Tip</span>
                  </div>

                  <span id="climateStatusPill" class="px-3 py-1 rounded-full text-[8px] font-bold uppercase border-2 text-sky-500 border-sky-100 bg-sky-50/50">
                    optimal
                  </span>
                </div>

                <div class="flex-grow flex flex-col justify-center overflow-hidden pr-2">
                  <p id="climateInsight" class="text-[14px] text-slate-600 leading-relaxed font-semibold bubbly-text line-clamp-2">
                    Real-time environmental monitoring is active. Values are streaming directly from your ESP32 device.
                  </p>
                </div>

                <div class="mt-4 pt-4 border-t border-sky-100 flex-shrink-0 flex items-center justify-between opacity-40">
                  <div class="flex items-center gap-2">
                    <div class="w-1.5 h-1.5 rounded-full bg-sky-400 animate-ping"></div>
                    <span class="text-[8px] font-bold text-slate-400 uppercase tracking-widest">LIVE SENSOR FEED</span>
                  </div>
                </div>
              </div>
            </div>
          </main>
        </div>
      </div>
    </div>
  </div>


  <!-- =========================
       FRAME 18: Flappy Bird (copied from web2)
       ========================= -->
  <div class="frame-18" id="frame18" style="display:none;">
    <div class="flappy-body">
      <!-- Back button (center) -->
      <button id="frame18BackBtn" class="flappy-back-btn pixel-shadow" type="button" aria-label="Back">BACK</button>
      <div id="flappyRoot" class="flappy-root"></div>
    </div>
  </div>

<script type="module" id="flappyFrame18Module">
var __defProp = Object.defineProperty;
var __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;
var __publicField = (obj, key, value) => __defNormalProp(obj, typeof key !== "symbol" ? key + "" : key, value);

// mnt/data/_flappybuild/index.tsx
import React2 from "react";
import ReactDOM from "react-dom/client";

// mnt/data/_flappybuild/App.tsx
import React, { useState, useEffect, useCallback, useRef } from "react";

// mnt/data/_flappybuild/constants.ts
var SETTINGS = {
  gravity: 0.15,
  // ‡∏•‡∏î‡∏•‡∏á‡∏≠‡∏µ‡∏Å‡∏à‡∏≤‡∏Å 0.22 ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏ï‡∏Å‡∏ä‡πâ‡∏≤‡∏•‡∏á‡∏°‡∏≤‡∏Å‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î
  jumpStrength: -3.8,
  // ‡∏•‡∏î‡πÅ‡∏£‡∏á‡πÇ‡∏î‡∏î‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏•‡∏≠‡∏¢‡∏•‡∏∞‡∏•‡πà‡∏≠‡∏á ‡πÑ‡∏°‡πà‡∏û‡∏∏‡πà‡∏á‡∏õ‡∏£‡∏µ‡πä‡∏î
  pipeSpeed: 2,
  // ‡∏ä‡πâ‡∏≤‡∏•‡∏á‡∏≠‡∏µ‡∏Å‡∏ô‡∏¥‡∏î‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏°‡∏µ‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏•‡πá‡∏á‡∏ó‡πà‡∏≠
  pipeWidth: 60,
  pipeGap: 170,
  // ‡∏Ç‡∏¢‡∏≤‡∏¢‡∏ä‡πà‡∏≠‡∏á‡∏ß‡πà‡∏≤‡∏á‡∏ó‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏Å‡∏ß‡πâ‡∏≤‡∏á‡∏Ç‡∏∂‡πâ‡∏ô‡∏≠‡∏µ‡∏Å‡∏ô‡∏¥‡∏î
  birdSize: 34,
  groundHeight: 100
};
var COLORS = {
  sky: "#70c5ce",
  ground: "#ded895",
  pipe: "#73bf2e",
  pipeBorder: "#543847",
  bird: "#f7d308"
};

// mnt/data/_flappybuild/services/soundService.ts
var SoundService = class {
  constructor() {
    __publicField(this, "ctx", null);
  }
  init() {
    if (!this.ctx) {
      this.ctx = new (window.AudioContext || window.webkitAudioContext)();
    }
    if (this.ctx.state === "suspended") {
      this.ctx.resume();
    }
  }
  playFlap() {
    this.init();
    if (!this.ctx) return;
    const osc = this.ctx.createOscillator();
    const gain = this.ctx.createGain();
    osc.type = "triangle";
    osc.frequency.setValueAtTime(150, this.ctx.currentTime);
    osc.frequency.exponentialRampToValueAtTime(400, this.ctx.currentTime + 0.1);
    gain.gain.setValueAtTime(0.3, this.ctx.currentTime);
    gain.gain.exponentialRampToValueAtTime(0.01, this.ctx.currentTime + 0.1);
    osc.connect(gain);
    gain.connect(this.ctx.destination);
    osc.start();
    osc.stop(this.ctx.currentTime + 0.1);
  }
  playScore() {
    this.init();
    if (!this.ctx) return;
    const osc = this.ctx.createOscillator();
    const gain = this.ctx.createGain();
    osc.type = "sine";
    osc.frequency.setValueAtTime(800, this.ctx.currentTime);
    osc.frequency.setValueAtTime(1200, this.ctx.currentTime + 0.05);
    gain.gain.setValueAtTime(0.1, this.ctx.currentTime);
    gain.gain.exponentialRampToValueAtTime(0.01, this.ctx.currentTime + 0.2);
    osc.connect(gain);
    gain.connect(this.ctx.destination);
    osc.start();
    osc.stop(this.ctx.currentTime + 0.2);
  }
  playCrash() {
    this.init();
    if (!this.ctx) return;
    const osc = this.ctx.createOscillator();
    const gain = this.ctx.createGain();
    osc.type = "square";
    osc.frequency.setValueAtTime(200, this.ctx.currentTime);
    osc.frequency.linearRampToValueAtTime(50, this.ctx.currentTime + 0.3);
    gain.gain.setValueAtTime(0.2, this.ctx.currentTime);
    gain.gain.linearRampToValueAtTime(0.01, this.ctx.currentTime + 0.3);
    osc.connect(gain);
    gain.connect(this.ctx.destination);
    osc.start();
    osc.stop(this.ctx.currentTime + 0.3);
  }
};
var sounds = new SoundService();

// mnt/data/_flappybuild/services/bleService.ts
var BLEService = class {
  constructor() {
    __publicField(this, "device", null);
    __publicField(this, "onMessageCallback", null);
    __publicField(this, "isConnecting", false);
  }
  async connect() {
    if (this.isConnecting) return false;
    if (this.device && this.device.gatt?.connected) return true;
    const bluetooth = navigator.bluetooth;
    if (!bluetooth) {
      console.error("Web Bluetooth is not supported in this browser.");
      return false;
    }
    this.isConnecting = true;
    try {
      const SERVICE_BIRD = "a158cb5d-0bc0-4752-a562-0a7ce2efe51e";
      const CHAR_BIRD = "de3b7cbd-ce7e-448b-87e7-cb9f0cb39d92";
      this.device = await bluetooth.requestDevice({
        filters: [
          { name: "FARALPHA" },
          { services: [SERVICE_BIRD] }
        ],
        optionalServices: [SERVICE_BIRD]
      });
      console.log("Found device:", this.device.name);
      const server = await this.device.gatt?.connect();
      console.log("GATT Connected");
      const service = await server.getPrimaryService(SERVICE_BIRD);
      const characteristic = await service.getCharacteristic(CHAR_BIRD);
      await characteristic.startNotifications();
      characteristic.addEventListener("characteristicvaluechanged", (event) => {
        const value = event.target.value;
        const decoder = new TextDecoder("utf-8");
        const message = decoder.decode(value).trim();
        if (this.onMessageCallback) {
          this.onMessageCallback(message);
        }
      });
      console.log("BLE Subscribed to BIRD Notifications");
      this.device.addEventListener("gattserverdisconnected", () => {
        console.log("BLE Disconnected");
        this.device = null;
      });
      this.isConnecting = false;
      return true;
    } catch (error) {
      console.error("BLE Connection Error:", error);
      this.isConnecting = false;
      this.device = null;
      return false;
    }
  }
  onMessage(callback) {
    this.onMessageCallback = callback;
  }
  disconnect() {
    if (this.device && this.device.gatt?.connected) {
      this.device.gatt.disconnect();
    }
    this.device = null;
  }
};
var bleService = new BLEService();

// mnt/data/_flappybuild/services/geminiService.ts
import { GoogleGenAI } from "@google/genai";
var ai = new GoogleGenAI({ apiKey: process.env.API_KEY });
var getAICommentary = async (score, reason) => {
  try {
    const response = await ai.models.generateContent({
      model: "gemini-3-flash-preview",
      contents: `You are a witty, slightly snarky arcade game commentator. 
      The player just died in Flappy Bird with a score of ${score}. 
      The reason for death was: ${reason}. 
      Provide a very short (max 15 words) sarcastic or encouraging comment in a retro gamer tone.`,
      config: {
        temperature: 0.9,
        topP: 0.8
      }
    });
    return response.text?.trim() || "Better luck next time, scrub!";
  } catch (error) {
    console.error("Gemini Error:", error);
    return "Ouch. That had to hurt.";
  }
};

// mnt/data/_flappybuild/App.tsx
var GAME_WIDTH = 912;
var GAME_HEIGHT = 422;
var App = () => {
  const [gameState, setGameState] = useState("START" /* START */);
  const [score, setScore] = useState(0);
  const [highScore, setHighScore] = useState(0);
  const [isBleConnected, setIsBleConnected] = useState(false);
  const [isConnecting, setIsConnecting] = useState(false);
  const [bleError, setBleError] = useState(null);
  const [commentary, setCommentary] = useState("");
  const canvasRef = useRef(null);
  const requestRef = useRef(void 0);
  const lastTimeRef = useRef(0);
  const birdRef = useRef({ y: GAME_HEIGHT / 2, velocity: 0, rotation: 0 });
  const pipesRef = useRef([]);
  const cloudsRef = useRef([]);
  const scoreRef = useRef(0);
  const pipeSpawnTimerRef = useRef(0);
  const groundOffsetRef = useRef(0);
  const lastBleStateRef = useRef("0");
  useEffect(() => {
    const initialClouds = [];
    for (let i = 0; i < 7; i++) {
      initialClouds.push({
        x: Math.random() * GAME_WIDTH,
        y: 20 + Math.random() * 100,
        speed: 0.15 + Math.random() * 0.3,
        scale: 0.6 + Math.random() * 0.8,
        opacity: 0.3 + Math.random() * 0.4
      });
    }
    cloudsRef.current = initialClouds;
  }, []);
  const resetGameLogic = useCallback(() => {
    birdRef.current = { y: GAME_HEIGHT / 2, velocity: 0, rotation: 0 };
    pipesRef.current = [];
    scoreRef.current = 0;
    pipeSpawnTimerRef.current = 0;
    setScore(0);
    setCommentary("");
  }, []);
  const handleGameOver = useCallback((reason) => {
    setGameState("GAME_OVER" /* GAME_OVER */);
    sounds.playCrash();
    if (scoreRef.current > highScore) setHighScore(scoreRef.current);
    getAICommentary(scoreRef.current, reason).then(setCommentary);
  }, [highScore]);
  const startGame = useCallback(() => {
    resetGameLogic();
    setGameState("PLAYING" /* PLAYING */);
    sounds.playFlap();
    lastTimeRef.current = performance.now();
  }, [resetGameLogic]);
  const goToHome = useCallback(() => {
    resetGameLogic();
    setGameState("START" /* START */);
  }, [resetGameLogic]);
  const handleInput = useCallback(() => {
    if (gameState === "START" /* START */) {
      startGame();
    } else if (gameState === "PLAYING" /* PLAYING */) {
      birdRef.current.velocity = SETTINGS.jumpStrength;
      sounds.playFlap();
    }
  }, [gameState, startGame]);
  const handleInputRef = useRef(handleInput);
  useEffect(() => {
    handleInputRef.current = handleInput;
  }, [handleInput]);
  const connectBle = async (e) => {
    if (e) e.stopPropagation();
    setIsConnecting(true);
    setBleError(null);
    const success = await bleService.connect();
    setIsBleConnected(success);
    setIsConnecting(false);
    if (!success) {
      setBleError("Connection Failed. Check Bluetooth/Device.");
      setTimeout(() => setBleError(null), 3e3);
    }
  };
  useEffect(() => {
    bleService.onMessage((msg) => {
      const cleanMsg = msg.trim().toLowerCase();
      const isPressed = cleanMsg === "1" || cleanMsg === "on" || cleanMsg === "true";
      if (isPressed && lastBleStateRef.current === "0") {
        handleInputRef.current();
      }
      lastBleStateRef.current = isPressed ? "1" : "0";
    });
  }, []);
  const drawBird = (ctx, b) => {
    ctx.save();
    ctx.translate(50 + SETTINGS.birdSize / 2, b.y + SETTINGS.birdSize / 2);
    ctx.rotate(b.rotation * Math.PI / 180);
    ctx.fillStyle = COLORS.bird;
    ctx.strokeStyle = "#000";
    ctx.lineWidth = 2;
    ctx.beginPath();
    ctx.roundRect(-SETTINGS.birdSize / 2, -SETTINGS.birdSize / 2, SETTINGS.birdSize, SETTINGS.birdSize, 8);
    ctx.fill();
    ctx.stroke();
    ctx.fillStyle = "#fff";
    ctx.beginPath();
    ctx.arc(6, -6, 5, 0, Math.PI * 2);
    ctx.fill();
    ctx.stroke();
    ctx.fillStyle = "#000";
    ctx.beginPath();
    ctx.arc(8, -6, 2, 0, Math.PI * 2);
    ctx.fill();
    ctx.fillStyle = "#f97316";
    ctx.beginPath();
    ctx.roundRect(SETTINGS.birdSize / 2 - 4, 0, 10, 8, 2);
    ctx.fill();
    ctx.stroke();
    ctx.fillStyle = "#fff";
    ctx.beginPath();
    ctx.roundRect(-SETTINGS.birdSize / 2 + 2, 2, 12, 10, 4);
    ctx.fill();
    ctx.stroke();
    ctx.restore();
  };
  const drawCloud = (ctx, cloud) => {
    ctx.save();
    ctx.globalAlpha = cloud.opacity;
    ctx.fillStyle = "#FFFFFF";
    const baseW = 45 * cloud.scale;
    ctx.beginPath();
    ctx.arc(cloud.x, cloud.y, baseW, 0, Math.PI * 2);
    ctx.arc(cloud.x + baseW * 0.7, cloud.y - baseW * 0.3, baseW * 0.8, 0, Math.PI * 2);
    ctx.arc(cloud.x + baseW * 1.3, cloud.y, baseW * 0.9, 0, Math.PI * 2);
    ctx.fill();
    ctx.restore();
  };
  const update = useCallback((time) => {
    const canvas = canvasRef.current;
    if (!canvas) return;
    const ctx = canvas.getContext("2d");
    if (!ctx) return;
    const dt = Math.min((time - lastTimeRef.current) / 16.67, 2.5);
    lastTimeRef.current = time;
    cloudsRef.current.forEach((c) => {
      c.x -= c.speed * dt;
      if (c.x < -180) c.x = GAME_WIDTH + 180;
    });
    if (gameState === "PLAYING" /* PLAYING */) {
      birdRef.current.velocity += SETTINGS.gravity * dt;
      birdRef.current.y += birdRef.current.velocity * dt;
      birdRef.current.rotation = Math.min(Math.max(birdRef.current.velocity * 4, -25), 90);
      if (birdRef.current.y + SETTINGS.birdSize > GAME_HEIGHT - SETTINGS.groundHeight) {
        handleGameOver("Ground collision");
      }
      pipesRef.current.forEach((p) => {
        p.x -= SETTINGS.pipeSpeed * dt;
        if (p.x + SETTINGS.pipeWidth > 50 && p.x < 50 + SETTINGS.birdSize) {
          if (birdRef.current.y < p.topHeight || birdRef.current.y + SETTINGS.birdSize > p.topHeight + SETTINGS.pipeGap) {
            handleGameOver("Pipe collision");
          }
        }
        if (!p.passed && p.x + SETTINGS.pipeWidth < 50) {
          p.passed = true;
          scoreRef.current++;
          setScore(scoreRef.current);
          sounds.playScore();
        }
      });
      pipesRef.current = pipesRef.current.filter((p) => p.x > -100);
      pipeSpawnTimerRef.current += dt;
      if (pipeSpawnTimerRef.current > 120) {
        pipeSpawnTimerRef.current = 0;
        const h = 60 + Math.random() * (GAME_HEIGHT - SETTINGS.pipeGap - SETTINGS.groundHeight - 120);
        pipesRef.current.push({ id: Date.now(), x: GAME_WIDTH, topHeight: h, passed: false });
      }
      groundOffsetRef.current = (groundOffsetRef.current + SETTINGS.pipeSpeed * dt) % 40;
    }
    ctx.fillStyle = COLORS.sky;
    ctx.fillRect(0, 0, GAME_WIDTH, GAME_HEIGHT);
    cloudsRef.current.forEach((c) => drawCloud(ctx, c));
    pipesRef.current.forEach((p) => {
      ctx.fillStyle = COLORS.pipe;
      ctx.strokeStyle = "#000";
      ctx.lineWidth = 3;
      ctx.fillRect(p.x, 0, SETTINGS.pipeWidth, p.topHeight);
      ctx.strokeRect(p.x, -5, SETTINGS.pipeWidth, p.topHeight + 5);
      const bY = p.topHeight + SETTINGS.pipeGap;
      ctx.fillRect(p.x, bY, SETTINGS.pipeWidth, GAME_HEIGHT - bY);
      ctx.strokeRect(p.x, bY, SETTINGS.pipeWidth, GAME_HEIGHT - bY);
    });
    const gY = GAME_HEIGHT - SETTINGS.groundHeight;
    ctx.fillStyle = COLORS.ground;
    ctx.fillRect(0, gY, GAME_WIDTH, SETTINGS.groundHeight);
    ctx.strokeStyle = "#000";
    ctx.lineWidth = 4;
    ctx.strokeRect(-2, gY, GAME_WIDTH + 4, 110);
    ctx.fillStyle = "rgba(0,0,0,0.06)";
    for (let i = 0; i < GAME_WIDTH + 40; i += 40) ctx.fillRect(i - groundOffsetRef.current, gY, 20, 110);
    drawBird(ctx, birdRef.current);
    requestRef.current = requestAnimationFrame(update);
  }, [gameState, handleGameOver]);
  useEffect(() => {
    requestRef.current = requestAnimationFrame(update);
    return () => {
      if (requestRef.current) cancelAnimationFrame(requestRef.current);
    };
  }, [update]);
  useEffect(() => {
    const canvas = canvasRef.current;
    if (!canvas) return;
    const dpr = window.devicePixelRatio || 1;
    canvas.width = GAME_WIDTH * dpr;
    canvas.height = GAME_HEIGHT * dpr;
    canvas.style.width = `${GAME_WIDTH}px`;
    canvas.style.height = `${GAME_HEIGHT}px`;
    canvas.getContext("2d")?.scale(dpr, dpr);
  }, []);
  useEffect(() => {
    const handleKey = (e) => {
      if (e.code === "Space" || e.code === "ArrowUp") handleInput();
    };
    window.addEventListener("keydown", handleKey);
    return () => window.removeEventListener("keydown", handleKey);
  }, [handleInput]);
  return /* @__PURE__ */ React.createElement("div", { className: "flex items-center justify-center w-full h-full bg-slate-950 overflow-hidden select-none touch-none", onClick: () => handleInput() }, /* @__PURE__ */ React.createElement("div", { className: "relative overflow-hidden bg-black pixel-shadow border-4 border-black", style: { width: GAME_WIDTH, height: GAME_HEIGHT } }, /* @__PURE__ */ React.createElement("canvas", { ref: canvasRef, className: "block w-full h-full" }), /* @__PURE__ */ React.createElement("div", { className: "absolute top-4 right-4 z-[60] flex flex-col items-end gap-2" }, !isBleConnected ? /* @__PURE__ */ React.createElement("div", { className: "flex flex-col items-end gap-1" }, /* @__PURE__ */ React.createElement(
    "button",
    {
      onClick: connectBle,
      disabled: isConnecting,
      className: `px-4 py-2 rounded-xl text-[10px] font-bold border-b-4 transition-all ${isConnecting ? "bg-gray-500 border-gray-700" : "bg-blue-500 border-blue-700 active:border-b-0 active:translate-y-1"} text-white`
    },
    isConnecting ? "SEARCHING..." : "CONNECT SENSOR"
  ), bleError && /* @__PURE__ */ React.createElement("div", { className: "text-[8px] text-red-400 bg-red-950/50 px-2 py-1 rounded" }, bleError)) : /* @__PURE__ */ React.createElement("div", { className: "flex items-center gap-2 bg-green-500/90 px-3 py-1 rounded-full text-white text-[8px] animate-pulse font-mono border border-white/20" }, /* @__PURE__ */ React.createElement("div", { className: "w-1.5 h-1.5 bg-white rounded-full" }), "FARALPHA CONNECTED")), /* @__PURE__ */ React.createElement("div", { className: "absolute top-10 left-0 right-0 text-center pointer-events-none z-40" }, /* @__PURE__ */ React.createElement("h1", { className: "text-white text-5xl drop-shadow-[4px_4px_0px_rgba(0,0,0,0.5)]" }, score)), gameState === "START" /* START */ && /* @__PURE__ */ React.createElement("div", { className: "absolute inset-0 z-50 flex flex-col items-center justify-center bg-black/40 text-white" }, /* @__PURE__ */ React.createElement("div", { className: "bg-white/10 backdrop-blur-md p-10 rounded-3xl border-4 border-white pixel-shadow text-center animate-bob" }, /* @__PURE__ */ React.createElement("h2", { className: "text-3xl mb-4 text-yellow-400 font-bold" }, "FLAPPY BIRD"), /* @__PURE__ */ React.createElement("p", { className: "text-xs mb-8 text-white/80 uppercase tracking-widest font-mono" }, isBleConnected ? "Ready! Tap sensor to start" : "Tap screen or connect sensor"), /* @__PURE__ */ React.createElement("div", { className: "text-[10px] text-white/50 animate-pulse uppercase" }, "Tap screen to Start"))), gameState === "GAME_OVER" /* GAME_OVER */ && /* @__PURE__ */ React.createElement("div", { className: "absolute inset-0 z-50 flex flex-col items-center justify-center bg-red-900/40 p-4" }, /* @__PURE__ */ React.createElement("div", { className: "bg-white p-6 rounded-2xl border-4 border-black pixel-shadow text-black text-center w-full max-w-[340px]" }, /* @__PURE__ */ React.createElement("h2", { className: "text-2xl text-red-600 mb-2 font-bold font-mono uppercase tracking-tighter" }, "Crashed!"), /* @__PURE__ */ React.createElement("p", { className: "text-[10px] italic text-gray-700 bg-gray-100 p-3 rounded-xl mb-4 leading-relaxed" }, '"', commentary, '"'), /* @__PURE__ */ React.createElement("div", { className: "flex justify-around mb-4 border-y-2 border-gray-100 py-4 font-bold" }, /* @__PURE__ */ React.createElement("div", null, /* @__PURE__ */ React.createElement("p", { className: "text-[8px] text-gray-400 uppercase" }, "Score"), /* @__PURE__ */ React.createElement("p", { className: "text-2xl" }, score)), /* @__PURE__ */ React.createElement("div", null, /* @__PURE__ */ React.createElement("p", { className: "text-[8px] text-gray-400 uppercase" }, "Best"), /* @__PURE__ */ React.createElement("p", { className: "text-2xl" }, highScore))), /* @__PURE__ */ React.createElement("div", { className: "flex gap-4" }, /* @__PURE__ */ React.createElement("button", { className: "flex-1 bg-yellow-400 py-4 border-b-6 border-yellow-600 active:border-b-0 rounded-xl font-bold text-xs", onClick: (e) => {
    e.stopPropagation();
    startGame();
  } }, "RETRY"), /* @__PURE__ */ React.createElement("button", { className: "flex-1 bg-blue-500 py-4 border-b-6 border-blue-700 active:border-b-0 rounded-xl font-bold text-xs text-white", onClick: (e) => {
    e.stopPropagation();
    goToHome();
  } }, "HOME"))))));
};
var App_default = App;

// mnt/data/_flappybuild/index.tsx
var rootElement = document.getElementById("flappyRoot");
if (!rootElement) {
  throw new Error("Could not find flappyRoot element to mount to");
}
window.__flappyUnmount?.();
var root = ReactDOM.createRoot(rootElement);
window.__flappyReactRoot = root;
window.__flappyUnmount = () => {
  try {
    root.unmount();
  } catch {
  }
};
root.render(
  /* @__PURE__ */ React2.createElement(React2.StrictMode, null, /* @__PURE__ */ React2.createElement(App_default, null))
);

</script>

<script type="module"
import React from "react";
import { createRoot } from "react-dom/client";

// ------------------------------
// Fruit Slash (Frame15) bundle (from web2)
// ------------------------------
// mnt/data/_fruitbuild/main.tsx
import { useEffect as useEffect2, useState as useState2 } from "react";

// mnt/data/_fruitbuild/FruitSlash.tsx
import { useState, useRef, useEffect, useCallback } from "react";
import { Fragment, jsx, jsxs } from "react/jsx-runtime";
var DIFFICULTY_CONFIG = {
  easy: { time: 90, speedMult: 0.7, bombProb: 0.05, spawnInterval: 1.1, label: "EASY", color: "bg-emerald-500" },
  medium: { time: 60, speedMult: 1, bombProb: 0.15, spawnInterval: 0.7, label: "MEDIUM", color: "bg-amber-500" },
  hard: { time: 45, speedMult: 1.4, bombProb: 0.3, spawnInterval: 0.5, label: "HARD", color: "bg-rose-500" }
};
var FRUIT_EMOJIS = {
  apple: "\u{1F34E}",
  banana: "\u{1F34C}",
  orange: "\u{1F34A}",
  watermelon: "\u{1F349}",
  pineapple: "\u{1F34D}",
  bomb: "\u{1F4A3}"
};
var FRUIT_COLORS = {
  apple: "#FF3B30",
  banana: "#FFD60A",
  orange: "#FF9500",
  watermelon: "#FF2D55",
  pineapple: "#FFCC00",
  bomb: "#1A1A1A"
};
var SOUND_URLS = {
  slice: "https://assets.mixkit.co/active_storage/sfx/2112/2112-preview.mp3",
  bomb: "https://assets.mixkit.co/active_storage/sfx/1004/1004-preview.mp3",
  end: "https://assets.mixkit.co/active_storage/sfx/2000/2000-preview.mp3"
};
var APP_WIDTH = 912;
var APP_HEIGHT = 422;
var FruitSlash = ({ onBack, bestScore, onUpdateBest }) => {
  const [gameState, setGameState] = useState("menu");
  const gameStateRef = useRef(gameState);
  const [score, setScore] = useState(0);
  const [comboStreak, setComboStreak] = useState(0);
  const [timeLeft, setTimeLeft] = useState(60);
  const [countdown, setCountdown] = useState(3);
  const [is2Player, setIs2Player] = useState(false);
  const [difficulty, setDifficulty] = useState("medium");
  const [isMuted, setIsMuted] = useState(() => localStorage.getItem("fruit_mute") === "true");
  const [error, setError] = useState(null);
  const videoRef = useRef(null);
  const canvasRef = useRef(null);
  const handsRef = useRef(null);
  const cameraRef = useRef(null);
  const objectsRef = useRef([]);
  const particlesRef = useRef([]);
  const lastTimeRef = useRef(0);
  const spawnTimerRef = useRef(0);
  const handResultsRef = useRef(null);
  const swordsRef = useRef(/* @__PURE__ */ new Map());
  const currentConfig = DIFFICULTY_CONFIG[difficulty];
  const playSound = (type) => {
    if (isMuted) return;
    const audio = new Audio(SOUND_URLS[type]);
    const gv = typeof window.__FRA_VOLUME__ === "number" ? window.__FRA_VOLUME__ : 1;
    audio.volume = 0.5 * Math.max(0, Math.min(1, gv));
    audio.play().catch(() => {
    });
  };
  useEffect(() => {
    gameStateRef.current = gameState;
  }, [gameState]);
  useEffect(() => {
    localStorage.setItem("fruit_mute", isMuted.toString());
  }, [isMuted]);
  const initCamera = async () => {
    setGameState("loading");
    setError(null);
    await new Promise((resolve) => setTimeout(resolve, 100));
    try {
      if (!handsRef.current) {
        const hands = new window.Hands({
          locateFile: (file) => `https://cdn.jsdelivr.net/npm/@mediapipe/hands/${file}`
        });
        hands.setOptions({
          maxNumHands: is2Player ? 2 : 1,
          modelComplexity: 0,
          minDetectionConfidence: 0.5,
          minTrackingConfidence: 0.5
        });
        hands.onResults((results) => {
          handResultsRef.current = results;
          onHandProcessing(results);
        });
        handsRef.current = hands;
      }
      if (videoRef.current) {
        cameraRef.current = new window.Camera(videoRef.current, {
          onFrame: async () => {
            if (handsRef.current && videoRef.current) {
              await handsRef.current.send({ image: videoRef.current });
            }
          },
          width: 640,
          height: 480
        });
        await cameraRef.current.start();
      }
      setGameState("waiting");
    } catch (err) {
      console.error(err);
      setError("CAMERA ERROR: PLEASE CHECK PERMISSIONS.");
      setGameState("menu");
    }
  };
  const onHandProcessing = (results) => {
    const activeIndices = /* @__PURE__ */ new Set();
    if (results.multiHandLandmarks && results.multiHandLandmarks.length > 0) {
      if (gameStateRef.current === "waiting") {
        setGameState("countdown");
        setCountdown(3);
      }
      const handsToProcess = is2Player ? results.multiHandLandmarks.slice(0, 2) : results.multiHandLandmarks.slice(0, 1);
      handsToProcess.forEach((landmarks, index) => {
        const tip = landmarks[8];
        // ‚úÖ Align sword position with the exact video transform used in gameLoop()
        // gameLoop(): translate(W/2,H/2) -> rotate(PI/2) -> scale(1,-1)
        // This mapping becomes: canvasX = tip.y * W, canvasY = tip.x * H
        const x = tip.y * APP_WIDTH;
        const y = tip.x * APP_HEIGHT;
        const existing = swordsRef.current.get(index);
        if (existing) {
          if (gameStateRef.current === "playing") checkCollision(existing.x, existing.y, x, y);
          swordsRef.current.set(index, { x, y, px: existing.x, py: existing.y });
        } else {
          swordsRef.current.set(index, { x, y, px: x, py: y });
        }
        activeIndices.add(index);
      });
    }
    for (const key of swordsRef.current.keys()) {
      if (!activeIndices.has(key)) swordsRef.current.delete(key);
    }
  };
  const checkCollision = (x1, y1, x2, y2) => {
    objectsRef.current.forEach((obj) => {
      if (obj.isSliced) return;
      const dx = x2 - x1;
      const dy = y2 - y1;
      const lenSq = dx * dx + dy * dy;
      if (lenSq === 0) return;
      let t = ((obj.x - x1) * dx + (obj.y - y1) * dy) / lenSq;
      t = Math.max(0, Math.min(1, t));
      const distSq = (obj.x - (x1 + t * dx)) ** 2 + (obj.y - (y1 + t * dy)) ** 2;
      if (distSq < (obj.radius + 10) ** 2) {
        obj.isSliced = true;
        obj.sliceAngle = Math.atan2(dy, dx);
        obj.sliceTime = Date.now();
        if (obj.type === "bomb") {
          playSound("bomb");
          stopGame();
        } else {
          playSound("slice");
          setScore((s) => s + 1 * Math.min(10, 1 + Math.floor(comboStreak / 5)));
          setComboStreak((prev) => prev + 1);
          spawnParticles(obj.x, obj.y, FRUIT_COLORS[obj.type]);
        }
      }
    });
  };
  const spawnParticles = (x, y, color) => {
    const count = 6;
    for (let i = 0; i < count; i++) {
      particlesRef.current.push({
        x,
        y,
        vx: (Math.random() - 0.5) * 400,
        vy: (Math.random() - 0.5) * 400,
        color,
        life: 0.7,
        size: Math.random() * 4 + 1
      });
    }
  };
  const stopGame = useCallback(() => {
    if (cameraRef.current) cameraRef.current.stop();
    if (score > bestScore) onUpdateBest(score);
    playSound("end");
    setGameState("ended");
  }, [score, bestScore, onUpdateBest]);
  const quitGame = () => {
    if (cameraRef.current) cameraRef.current.stop();
    setGameState("menu");
    objectsRef.current = [];
    particlesRef.current = [];
    swordsRef.current.clear();
  };
  useEffect(() => {
    if (gameState === "countdown") {
      const timer = setInterval(() => {
        setCountdown((prev) => {
          if (prev <= 1) {
            clearInterval(timer);
            setGameState("playing");
            setScore(0);
            setComboStreak(0);
            setTimeLeft(DIFFICULTY_CONFIG[difficulty].time);
            objectsRef.current = [];
            particlesRef.current = [];
            return 0;
          }
          return prev - 1;
        });
      }, 1e3);
      return () => clearInterval(timer);
    }
  }, [gameState, difficulty]);
  useEffect(() => {
    let timer;
    if (gameState === "playing") {
      timer = setInterval(() => setTimeLeft((prev) => {
        if (prev <= 1) stopGame();
        return prev - 1;
      }), 1e3);
    }
    return () => clearInterval(timer);
  }, [gameState, stopGame]);
  const gameLoop = useCallback((time) => {
    if (!canvasRef.current || !videoRef.current) return;
    const ctx = canvasRef.current.getContext("2d", { alpha: false });
    if (!ctx) return;
    const dt = lastTimeRef.current ? Math.min(0.05, (time - lastTimeRef.current) / 1e3) : 0;
    lastTimeRef.current = time;
    ctx.save();
    ctx.translate(APP_WIDTH / 2, APP_HEIGHT / 2);
    ctx.rotate(Math.PI / 2);

    // flip vertical (top <-> bottom)
    ctx.scale(1, -1);
    
    ctx.drawImage(videoRef.current, -APP_HEIGHT / 2, -APP_WIDTH / 2, APP_HEIGHT, APP_WIDTH);
    ctx.restore();
    if (handResultsRef.current?.multiHandLandmarks) {
      ctx.save();
      handResultsRef.current.multiHandLandmarks.forEach((landmarks) => {
        // ‚úÖ Align landmark overlay with the exact video transform used in gameLoop()
        // Mapping: canvasX = land.y * W, canvasY = land.x * H
        const transformedLandmarks = landmarks.map((land) => ({
          x: land.y,
          y: land.x
        }));
        window.drawConnectors(ctx, transformedLandmarks, window.HAND_CONNECTIONS, {
          color: "#00FFCC",
          lineWidth: 2
        });
        transformedLandmarks.forEach((land) => {
          const lx = land.x * APP_WIDTH;
          const ly = land.y * APP_HEIGHT;
          ctx.fillStyle = "#FFFFFF";
          ctx.beginPath();
          ctx.arc(lx, ly, 3, 0, Math.PI * 2);
          ctx.fill();
        });
      });
      ctx.restore();
    }
    if (gameStateRef.current === "playing") {
      spawnTimerRef.current += dt;
      if (spawnTimerRef.current > currentConfig.spawnInterval) {
        spawnTimerRef.current = 0;
        const isBomb = Math.random() < currentConfig.bombProb;
        const types = ["apple", "banana", "orange", "watermelon", "pineapple"];
        objectsRef.current.push({
          id: Math.random(),
          x: Math.random() * (APP_WIDTH - 120) + 60,
          y: APP_HEIGHT + 40,
          vx: (Math.random() - 0.5) * 350 * currentConfig.speedMult,
          vy: -(Math.random() * 150 + 550) * currentConfig.speedMult,
          radius: 28,
          type: isBomb ? "bomb" : types[Math.floor(Math.random() * types.length)],
          isSliced: false,
          angle: Math.random() * Math.PI * 2,
          rotationSpeed: (Math.random() - 0.5) * 6 * currentConfig.speedMult
        });
      }
    }
    particlesRef.current.forEach((p) => {
      p.x += p.vx * dt;
      p.y += p.vy * dt;
      p.vy += 800 * dt;
      p.life -= dt * 2;
    });
    particlesRef.current = particlesRef.current.filter((p) => p.life > 0);
    const gravity = 600;
    objectsRef.current.forEach((obj) => {
      obj.vy += gravity * dt;
      obj.x += obj.vx * dt;
      obj.y += obj.vy * dt;
      obj.angle += obj.rotationSpeed * dt;
      if (gameStateRef.current === "playing" && obj.y > APP_HEIGHT + 40 && !obj.isSliced && obj.type !== "bomb") {
        setComboStreak(0);
      }
      ctx.save();
      ctx.translate(obj.x, obj.y);
      ctx.rotate(obj.angle);
      ctx.font = "55px Arial";
      ctx.textAlign = "center";
      ctx.textBaseline = "middle";
      if (obj.isSliced) {
        const t = (Date.now() - (obj.sliceTime || 0)) / 1e3;
        ctx.globalAlpha = Math.max(0, 1 - t * 3);
        ctx.save();
        ctx.rotate(obj.sliceAngle || 0);
        ctx.fillText(FRUIT_EMOJIS[obj.type], -t * 100, -3);
        ctx.fillText(FRUIT_EMOJIS[obj.type], t * 100, 3);
        ctx.restore();
      } else {
        ctx.fillText(FRUIT_EMOJIS[obj.type], 0, 0);
      }
      ctx.restore();
    });
    objectsRef.current = objectsRef.current.filter((o) => o.y < APP_HEIGHT + 100);
    ctx.save();
    particlesRef.current.forEach((p) => {
      ctx.globalAlpha = p.life;
      ctx.fillStyle = p.color;
      ctx.beginPath();
      ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2);
      ctx.fill();
    });
    ctx.restore();
    swordsRef.current.forEach((pos) => {
      ctx.save();
      ctx.beginPath();
      ctx.moveTo(pos.px, pos.py);
      ctx.lineTo(pos.x, pos.y);
      ctx.strokeStyle = "#FFFFFF";
      ctx.lineWidth = 8;
      ctx.lineCap = "round";
      ctx.stroke();
      ctx.lineWidth = 3;
      ctx.strokeStyle = "#00F3FF";
      ctx.stroke();
      ctx.beginPath();
      ctx.arc(pos.x, pos.y, 5, 0, Math.PI * 2);
      ctx.fillStyle = "#FFFFFF";
      ctx.fill();
      ctx.restore();
    });
    requestAnimationFrame(gameLoop);
  }, [stopGame, isMuted, comboStreak, currentConfig]);
  useEffect(() => {
    const frame = requestAnimationFrame(gameLoop);
    return () => cancelAnimationFrame(frame);
  }, [gameLoop]);
  const isPlayView = gameState === "playing" || gameState === "waiting" || gameState === "countdown";
  return /* @__PURE__ */ jsxs("div", { className: "relative w-full h-full bg-black overflow-hidden select-none flex flex-col items-center justify-center", children: [
    /* @__PURE__ */ jsx("video", { ref: videoRef, className: "hidden", playsInline: true, muted: true }),
    isPlayView && /* @__PURE__ */ jsxs(Fragment, { children: [
      /* @__PURE__ */ jsx(
        "button",
        {
          onClick: quitGame,
          className: "absolute top-4 left-4 z-[75] p-3 bg-white/20 backdrop-blur-lg rounded-full text-white active:scale-90 transition-all shadow-lg border border-white/10",
          children: /* @__PURE__ */ jsx("svg", { className: "w-6 h-6", fill: "none", viewBox: "0 0 24 24", stroke: "currentColor", children: /* @__PURE__ */ jsx("path", { strokeLinecap: "round", strokeLinejoin: "round", strokeWidth: 3, d: "M10 19l-7-7m0 0l7-7m-7 7h18" }) })
        }
      ),
      /* @__PURE__ */ jsx(
        "button",
        {
          onClick: () => setIsMuted(!isMuted),
          className: "absolute top-4 right-4 z-[70] p-3 bg-white/10 backdrop-blur rounded-full active:scale-95",
          children: isMuted ? /* @__PURE__ */ jsx("svg", { className: "w-5 h-5 text-red-400", fill: "currentColor", viewBox: "0 0 24 24", children: /* @__PURE__ */ jsx("path", { d: "M16.5 12c0-1.77-1.02-3.29-2.5-4.03v2.21l2.45 2.45c.03-.2.05-.41.05-.63zm2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51C20.63 14.91 21 13.5 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zM4.27 3L3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06c1.38-.31 2.63-.95 3.69-1.81L19.73 21 21 19.73l-9-9L4.27 3zM12 4L9.91 6.09 12 8.18V4z" }) }) : /* @__PURE__ */ jsx("svg", { className: "w-5 h-5 text-white", fill: "currentColor", viewBox: "0 0 24 24", children: /* @__PURE__ */ jsx("path", { d: "M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z" }) })
        }
      )
    ] }),
    /* @__PURE__ */ jsx("div", { className: `absolute inset-0 transition-opacity duration-700 ${isPlayView ? "opacity-100" : "opacity-0 pointer-events-none"}`, children: /* @__PURE__ */ jsx("canvas", { ref: canvasRef, className: "w-full h-full block object-cover", width: APP_WIDTH, height: APP_HEIGHT }) }),
    gameState === "playing" && /* @__PURE__ */ jsxs("div", { className: "absolute top-2 left-1/2 -translate-x-1/2 flex items-center gap-4 px-4 py-1.5 bg-black/40 backdrop-blur-xl rounded-full text-white border border-white/10 z-[60] shadow-xl", children: [
      /* @__PURE__ */ jsxs("div", { className: "flex flex-col items-center", children: [
        /* @__PURE__ */ jsxs("div", { className: "text-lg font-black text-yellow-400 tabular-nums leading-none", children: [
          timeLeft,
          "s"
        ] }),
        /* @__PURE__ */ jsx("div", { className: `text-[6px] font-black px-1.5 rounded-full ${currentConfig.color} uppercase`, children: difficulty })
      ] }),
      /* @__PURE__ */ jsx("div", { className: "h-4 w-px bg-white/20" }),
      /* @__PURE__ */ jsxs("div", { className: "flex flex-col items-center", children: [
        /* @__PURE__ */ jsxs("div", { className: "text-md font-black italic tracking-tighter leading-none", children: [
          "SCORE: ",
          /* @__PURE__ */ jsx("span", { className: "text-green-400", children: score })
        ] }),
        comboStreak > 5 && /* @__PURE__ */ jsxs("div", { className: "text-[7px] font-black text-yellow-300 italic animate-pulse leading-none mt-0.5", children: [
          "COMBO X",
          Math.min(10, 1 + Math.floor(comboStreak / 5))
        ] })
      ] })
    ] }),
    gameState === "menu" && /* @__PURE__ */ jsxs("div", { className: "absolute inset-0 z-50 flex flex-col items-center justify-center bg-white p-4", children: [
      /* @__PURE__ */ jsx(
        "button",
        {
          onClick: onBack,
          className: "absolute top-4 left-4 p-3 bg-gray-50 hover:bg-gray-100 rounded-full transition-all",
          children: /* @__PURE__ */ jsx("svg", { className: "w-5 h-5 text-gray-400", fill: "none", viewBox: "0 0 24 24", stroke: "currentColor", children: /* @__PURE__ */ jsx("path", { strokeLinecap: "round", strokeLinejoin: "round", strokeWidth: 3, d: "M10 19l-7-7m0 0l7-7m-7 7h18" }) })
        }
      ),
      /* @__PURE__ */ jsxs("div", { className: "flex flex-col items-center max-w-sm w-full", children: [
        /* @__PURE__ */ jsx("div", { className: "text-5xl mb-2", children: "\u{1F34E}" }),
        /* @__PURE__ */ jsxs("h2", { className: "text-4xl font-black text-purple-900 italic uppercase tracking-tighter leading-none mb-6 text-center", children: [
          "FRUIT",
          /* @__PURE__ */ jsx("br", {}),
          "SLASH"
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "w-full space-y-4", children: [
          /* @__PURE__ */ jsxs("div", { className: "flex gap-1.5 p-1 bg-gray-100 rounded-xl", children: [
            /* @__PURE__ */ jsx("button", { onClick: () => setIs2Player(false), className: `flex-1 py-2 rounded-lg font-black text-[10px] ${!is2Player ? "bg-purple-600 text-white shadow-sm" : "text-gray-400"}`, children: "1 PLAYER" }),
            /* @__PURE__ */ jsx("button", { onClick: () => setIs2Player(true), className: `flex-1 py-2 rounded-lg font-black text-[10px] ${is2Player ? "bg-purple-600 text-white shadow-sm" : "text-gray-400"}`, children: "2 PLAYERS" })
          ] }),
          /* @__PURE__ */ jsx("div", { className: "flex gap-1.5 p-1 bg-gray-100 rounded-xl", children: ["easy", "medium", "hard"].map((level) => /* @__PURE__ */ jsx(
            "button",
            {
              onClick: () => setDifficulty(level),
              className: `flex-1 py-1.5 rounded-lg font-black text-[8px] uppercase italic ${difficulty === level ? `${DIFFICULTY_CONFIG[level].color} text-white` : "text-gray-400"}`,
              children: level
            },
            level
          )) }),
          /* @__PURE__ */ jsx("button", { onClick: initCamera, className: "w-full py-4 bg-purple-600 text-white text-xl font-black rounded-2xl shadow-[0_3px_0_rgb(88,28,135)] active:translate-y-1 active:shadow-none transition-all uppercase italic", children: "START GAME" })
        ] })
      ] }),
      error && /* @__PURE__ */ jsx("p", { className: "mt-2 text-red-500 font-bold text-[10px]", children: error })
    ] }),
    gameState === "loading" && /* @__PURE__ */ jsxs("div", { className: "absolute inset-0 z-50 flex flex-col items-center justify-center bg-white/90", children: [
      /* @__PURE__ */ jsx("div", { className: "w-10 h-10 border-4 border-purple-600 border-t-transparent rounded-full animate-spin" }),
      /* @__PURE__ */ jsx("p", { className: "mt-3 text-purple-900 font-black uppercase text-[10px] tracking-widest", children: "Optimizing Vision..." })
    ] }),
    gameState === "waiting" && /* @__PURE__ */ jsx("div", { className: "absolute inset-0 z-[65] flex items-center justify-center bg-black/40 backdrop-blur-sm", children: /* @__PURE__ */ jsxs("div", { className: "text-center p-8 bg-white rounded-[24px] shadow-2xl scale-90", children: [
      /* @__PURE__ */ jsx("div", { className: "text-5xl mb-3 animate-bounce", children: "\u{1F590}\uFE0F" }),
      /* @__PURE__ */ jsx("h2", { className: "text-2xl font-black text-purple-900 mb-1 uppercase italic", children: "Wave to Start" }),
      /* @__PURE__ */ jsx("p", { className: "text-purple-600 font-bold text-[8px] uppercase opacity-60 tracking-widest", children: "Hand tracking active" })
    ] }) }),
    gameState === "countdown" && /* @__PURE__ */ jsx("div", { className: "absolute inset-0 z-[66] flex items-center justify-center pointer-events-none", children: /* @__PURE__ */ jsx("div", { className: "text-[100px] font-black text-white italic animate-ping", children: countdown > 0 ? countdown : "GO!" }) }),
    gameState === "ended" && /* @__PURE__ */ jsxs("div", { className: "absolute inset-0 z-50 flex flex-col items-center justify-center bg-white p-4", children: [
      /* @__PURE__ */ jsx("h3", { className: "text-purple-300 font-black text-[10px] tracking-widest mb-2 italic", children: "GAME OVER" }),
      /* @__PURE__ */ jsx("div", { className: "text-[100px] font-black text-purple-900 leading-none italic mb-6", children: score }),
      /* @__PURE__ */ jsxs("div", { className: "w-full max-w-[240px] space-y-2", children: [
        /* @__PURE__ */ jsx("button", { onClick: initCamera, className: "w-full py-4 bg-purple-600 text-white text-lg font-black rounded-2xl uppercase italic shadow-[0_3px_0_rgb(88,28,135)]", children: "TRY AGAIN" }),
        /* @__PURE__ */ jsx("button", { onClick: () => setGameState("menu"), className: "w-full py-2.5 text-gray-400 font-black uppercase text-[9px]", children: "BACK TO MENU" })
      ] })
    ] })
  ] });
};
var FruitSlash_default = FruitSlash;

// mnt/data/_fruitbuild/main.tsx
import { jsx as jsx2 } from "react/jsx-runtime";
var App = () => {
  const [bestScore, setBestScore] = useState2(0);
  useEffect2(() => {
    const savedBest = localStorage.getItem("fruit_best");
    if (savedBest) setBestScore(parseInt(savedBest, 10) || 0);
  }, []);
  const updateBestScore = (s) => {
    setBestScore((prev) => {
      if (s > prev) {
        localStorage.setItem("fruit_best", s.toString());
        return s;
      }
      return prev;
    });
  };
  const goBackToCommunity = () => {
    if (typeof window.__FRA_GO_FRAME__ === "function") {
      window.__FRA_GO_FRAME__(6);
    } else {
      window.location.hash = "#frame6";
    }
  };
  return /* @__PURE__ */ jsx2("div", { className: "w-full h-full select-none overflow-hidden bg-white", children: /* @__PURE__ */ jsx2(
    FruitSlash_default,
    {
      onBack: goBackToCommunity,
      bestScore,
      onUpdateBest: updateBestScore
    }
  ) });
};
var main_default = App;
export {
  main_default as default
};

// ------------------------------
// Mount / Unmount hooks for the main app (web1)
// ------------------------------
let __fruitReactRoot = null;

window.__FRA_MOUNT_FRUIT__ = function () {
  const el = document.getElementById('fruitSlashRoot');
  if (!el) return;
  if (__fruitReactRoot) return;
  __fruitReactRoot = createRoot(el);
  __fruitReactRoot.render(React.createElement(App));
};

window.__FRA_UNMOUNT_FRUIT__ = function () {
  try {
    if (__fruitReactRoot) {
      __fruitReactRoot.unmount();
      __fruitReactRoot = null;
    }
  } catch (_) {
    __fruitReactRoot = null;
  }
};
  </script>


  <!-- =========================
       FRAME 16 bundle (from web2 TSX compiled)
       ========================= -->
  <script type="module">
// mnt/data/settings_build/main.tsx
import React2 from "react";
import { createRoot } from "react-dom/client";

// mnt/data/settings_build/components/SettingsFrame.tsx
import { useEffect, useMemo, useRef, useState } from "react";

// mnt/data/settings_build/components/AvatarSection.tsx
import { jsx, jsxs } from "react/jsx-runtime";
var AvatarSection = ({ avatar, name, age }) => {
  return /* @__PURE__ */ jsxs("div", { className: "flex flex-col items-center space-y-4 p-8 bg-[#1a2538]/40 rounded-[2.5rem] backdrop-blur-md", children: [
    /* @__PURE__ */ jsx("div", { className: "relative", children: /* @__PURE__ */ jsx("div", { className: "w-[90px] h-[90px] rounded-full overflow-hidden border-4 border-[#BE8DFF] shadow-[0_0_20px_rgba(190,141,255,0.3)]", children: /* @__PURE__ */ jsx("img", { src: avatar, alt: name, className: "w-full h-full object-cover object-center", style: { transform: "scale(1.15)" } }) }) }),
    /* @__PURE__ */ jsxs("div", { className: "text-center space-y-1", children: [
      /* @__PURE__ */ jsx("h2", { className: "text-white font-black text-2xl tracking-tight", children: name }),
      /* @__PURE__ */ jsxs("div", { className: "flex flex-col items-center", children: [
        /* @__PURE__ */ jsx("label", { className: "text-[10px] font-black text-purple-300 uppercase tracking-[0.2em]", children: "Age" }),
        /* @__PURE__ */ jsx("div", { className: "bg-[#BE8DFF]/20 px-4 py-1 rounded-full mt-1", children: /* @__PURE__ */ jsx("span", { className: "text-[#BE8DFF] font-black text-lg", children: age }) })
      ] })
    ] })
  ] });
};
var AvatarSection_default = AvatarSection;

// mnt/data/settings_build/components/Slider.tsx
import { jsx as jsx2, jsxs as jsxs2 } from "react/jsx-runtime";
var Slider = ({ label, value, min, max, icon, onChange, unit = "%" }) => {
  return /* @__PURE__ */ jsxs2("div", { className: "flex flex-col space-y-4 w-full", children: [
    /* @__PURE__ */ jsxs2("div", { className: "flex justify-between items-center", children: [
      /* @__PURE__ */ jsxs2("div", { className: "flex items-center space-x-3 text-[#BE8DFF]", children: [
        /* @__PURE__ */ jsx2("div", { className: `bg-[#BE8DFF]/10 p-2 rounded-xl transition-transform duration-150 ${value > 0 ? "scale-110" : "scale-100"}`, children: /* @__PURE__ */ jsx2("i", { className: `${icon} text-lg w-6 text-center` }) }),
        /* @__PURE__ */ jsx2("span", { className: "text-md font-bold tracking-wide text-purple-100", children: label })
      ] }),
      /* @__PURE__ */ jsxs2("span", { className: "text-sm font-black text-[#233047] bg-[#BE8DFF] px-3 py-1 rounded-full shadow-lg min-w-[50px] text-center", children: [
        value,
        unit
      ] })
    ] }),
    /* @__PURE__ */ jsx2(
      "input",
      {
        type: "range",
        min,
        max,
        value,
        onChange: (e) => onChange(parseInt(e.target.value)),
        className: "w-full cursor-pointer"
      }
    )
  ] });
};
var Slider_default = Slider;

// mnt/data/settings_build/components/SettingsFrame.tsx
import { Fragment, jsx as jsx3, jsxs as jsxs3 } from "react/jsx-runtime";
var SettingsFrame = ({ name, age, avatar, onBack }) => {
  const defaultSettings = useMemo(() => ({
    avatar,
    age,
    volume: 60,
    brightness: 100,
    displayName: name,
    email: "alpha@core.sys"
  }), [avatar, age, name]);
  const [settings, setSettings] = useState(defaultSettings);
  const [isSaved, setIsSaved] = useState(false);
  const audioCtxRef = useRef(null);
  const playVolumeFeedback = (volumeLevel) => {
    try {
      if (!audioCtxRef.current) {
        audioCtxRef.current = new (window.AudioContext || window.webkitAudioContext)();
      }
      const ctx = audioCtxRef.current;
      if (ctx.state === "suspended") ctx.resume();
      const oscillator = ctx.createOscillator();
      const gainNode = ctx.createGain();
      oscillator.type = "sine";
      oscillator.frequency.setValueAtTime(440, ctx.currentTime);
      const gainValue = volumeLevel / 100 * 0.3;
      gainNode.gain.setValueAtTime(gainValue, ctx.currentTime);
      gainNode.gain.exponentialRampToValueAtTime(0.01, ctx.currentTime + 0.2);
      oscillator.connect(gainNode);
      gainNode.connect(ctx.destination);
      oscillator.start();
      oscillator.stop(ctx.currentTime + 0.2);
    } catch (e) {
      console.error(e);
    }
  };
  const handleVolumeChange = (newVal) => {
    setSettings((prev) => ({ ...prev, volume: newVal }));
    playVolumeFeedback(newVal);
  };
  const handleBrightnessChange = (newVal) => {
    setSettings((prev) => ({ ...prev, brightness: newVal }));
  };
  const handleSave = () => {
    setIsSaved(true);
    setTimeout(() => setIsSaved(false), 2e3);
  };
  const handleReset = () => {
    setSettings((prev) => ({
      ...prev,
      volume: defaultSettings.volume,
      brightness: defaultSettings.brightness
    }));
  };
  // ‚úÖ Apply settings globally (all frames)
  useEffect(() => {
    const fn = window.__FRA_SET_BRIGHTNESS__;
    if (typeof fn === "function") fn(settings.brightness);
  }, [settings.brightness]);

  useEffect(() => {
    const fn = window.__FRA_SET_VOLUME__;
    if (typeof fn === "function") fn(settings.volume / 100);
  }, [settings.volume]);

  return /* @__PURE__ */ jsxs3(Fragment, { children: [
    /* @__PURE__ */ jsxs3("div", { className: "w-full h-full bg-[#233047] rounded-none shadow-none overflow-hidden flex relative", children: [
      /* @__PURE__ */ jsxs3(
        "button",
        {
          onClick: onBack,
          className: "absolute top-6 left-8 z-20 flex items-center space-x-2 text-purple-300/60 hover:text-[#BE8DFF] transition-all group",
          children: [
            /* @__PURE__ */ jsx3("div", { className: "w-10 h-10 rounded-full bg-[#1a2538]/60 flex items-center justify-center group-hover:shadow-[0_0_15px_rgba(190,141,255,0.2)] transition-all", children: /* @__PURE__ */ jsx3("i", { className: "fas fa-chevron-left text-xs translate-x-[-1px]" }) }),
            /* @__PURE__ */ jsx3("span", { className: "text-[10px] font-black uppercase tracking-[0.3em] opacity-0 group-hover:opacity-100 transition-opacity duration-300", children: "Back" })
          ]
        }
      ),
      /* @__PURE__ */ jsx3("div", { className: "absolute -top-20 -left-20 w-64 h-64 bg-[#BE8DFF]/10 rounded-full blur-3xl pointer-events-none" }),
      /* @__PURE__ */ jsx3("div", { className: "absolute -bottom-20 -right-20 w-64 h-64 bg-blue-500/10 rounded-full blur-3xl pointer-events-none" }),
      /* @__PURE__ */ jsxs3("div", { className: "w-1/3 bg-gradient-to-b from-[#1a2538] to-[#233047] p-10 flex flex-col items-center justify-center relative z-10", children: [
        /* @__PURE__ */ jsx3(AvatarSection_default, { avatar: settings.avatar, name: settings.displayName, age: settings.age }),
        /* @__PURE__ */ jsx3("div", { className: "mt-8 px-4 py-2 bg-purple-900/30 rounded-xl", children: /* @__PURE__ */ jsx3("span", { className: "text-purple-300 text-[10px] font-bold tracking-[0.2em] uppercase", children: "Status: Online" }) })
      ] }),
      /* @__PURE__ */ jsxs3("div", { className: "flex-1 p-12 pb-16 flex flex-col justify-between relative z-10", children: [
        /* @__PURE__ */ jsxs3("div", { children: [
          /* @__PURE__ */ jsxs3("div", { className: "flex items-center space-x-3 mb-10", children: [
            /* @__PURE__ */ jsx3("div", { className: "w-12 h-12 bg-[#BE8DFF]/10 rounded-2xl flex items-center justify-center text-[#BE8DFF] shadow-[inset_0_0_10px_rgba(190,141,255,0.1)]", children: /* @__PURE__ */ jsx3("i", { className: "fas fa-layer-group text-xl" }) }),
            /* @__PURE__ */ jsxs3("div", { children: [
              /* @__PURE__ */ jsx3("h2", { className: "text-2xl font-black text-white tracking-tight", children: "System Configuration" }),
              /* @__PURE__ */ jsx3("p", { className: "text-purple-300/60 text-xs font-bold uppercase tracking-widest", children: "Adjust device parameters" })
            ] })
          ] }),
          /* @__PURE__ */ jsxs3("div", { className: "space-y-10", children: [
            /* @__PURE__ */ jsx3(
              Slider_default,
              {
                label: "Output Volume",
                icon: `fas ${settings.volume === 0 ? "fa-volume-mute" : "fa-volume-up"}`,
                value: settings.volume,
                min: 0,
                max: 100,
                onChange: handleVolumeChange
              }
            ),
            /* @__PURE__ */ jsx3(
              Slider_default,
              {
                label: "Panel Brightness",
                icon: "fas fa-adjust",
                value: settings.brightness,
                min: 15,
                max: 100,
                onChange: handleBrightnessChange
              }
            )
          ] })
        ] }),
        /* @__PURE__ */ jsxs3("div", { className: "flex space-x-6 items-center justify-end mt-4", children: [
          /* @__PURE__ */ jsx3(
            "button",
            {
              onClick: handleReset,
              className: "text-purple-300/50 font-bold hover:text-[#BE8DFF] transition-colors px-6 uppercase text-xs tracking-widest",
              children: "Reset"
            }
          ),
          /* @__PURE__ */ jsx3(
            "button",
            {
              onClick: handleSave,
              className: `px-8 py-3 rounded-[1rem] font-black text-[#233047] transition-all shadow-xl hover:translate-y-[-2px] active:translate-y-[1px] ${isSaved ? "bg-emerald-400" : "bg-[#BE8DFF] hover:bg-[#d0aeff]"}`,
              children: isSaved ? "Sync Complete" : "Apply Changes"
            }
          )
        ] })
      ] })
    ] })
  ] });
};
var SettingsFrame_default = SettingsFrame;

// mnt/data/settings_build/App.tsx
import { jsx as jsx4, jsxs as jsxs4 } from "react/jsx-runtime";
var App = ({ name, age, avatar, onBack }) => {
  return /* @__PURE__ */ jsxs4("div", { className: "w-full h-full bg-[#1a2538] flex items-stretch justify-stretch p-0 relative overflow-hidden", children: [
    /* @__PURE__ */ jsx4("div", { className: "absolute top-[5%] left-[5%] w-64 h-64 bg-[#BE8DFF]/5 rounded-full blur-[100px]" }),
    /* @__PURE__ */ jsx4("div", { className: "absolute bottom-[5%] right-[5%] w-96 h-96 bg-blue-600/5 rounded-full blur-[120px]" }),
    /* @__PURE__ */ jsx4("div", { className: "absolute top-[10%] right-[10%] text-[#BE8DFF]/10 text-9xl font-black select-none pointer-events-none", children: "A" }),
    /* @__PURE__ */ jsx4("div", { className: "absolute bottom-[10%] left-[10%] text-blue-500/5 text-9xl font-black select-none pointer-events-none tracking-tighter", children: "01" }),
    /* @__PURE__ */ jsxs4("div", { className: "relative z-10 w-full h-full", children: [
      /* @__PURE__ */ jsx4(SettingsFrame_default, { name, age, avatar, onBack }),
      // /* @__PURE__ */ jsx4("div", { className: "absolute bottom-3 left-1/2 -translate-x-1/2 text-center text-purple-300/30 font-bold tracking-[0.5em] uppercase text-[10px] pointer-events-none", children: /* @__PURE__ */ jsx4("p", { children: "Alpha Interface System v1.0.1" }) })
    ] })
  ] });
};
var App_default = App;

// mnt/data/settings_build/main.tsx
import { jsx as jsx5 } from "react/jsx-runtime";
function getActiveProfile() {
  try {
    const LS_PROFILES_KEY = "fra_profiles_v1";
    const LS_STATE_KEY = "fra_state_v1";
    const profiles = JSON.parse(localStorage.getItem(LS_PROFILES_KEY) || "[]");
    const state = JSON.parse(localStorage.getItem(LS_STATE_KEY) || "{}");
    const id = state?.currentProfileId;
    const p = (profiles || []).find((x) => x?.id === id) || (profiles || [])[0] || null;
    if (p) {
      return {
        name: String(p.name || "Guest"),
        age: Number(p.ageNumber || 0),
        avatar: String(p.avatarSrc || "Pic13.png")
      };
    }
  } catch (_) {
  }
  return { name: "Guest", age: 0, avatar: "Pic13.png" };
}
var __settingsRoot = null;
window.__FRA_MOUNT_SETTINGS__ = function() {
  const el = document.getElementById("settingsRoot");
  if (!el) return;
  if (__settingsRoot) return;
  const profile = getActiveProfile();
  const onBack = () => {
    if (typeof window.__FRA_GO_FRAME6_HOME__ === "function") {
      window.__FRA_GO_FRAME6_HOME__();
    } else if (typeof window.__FRA_GO_FRAME__ === "function") {
      window.__FRA_GO_FRAME__(6);
    } else {
      location.hash = "#frame6";
    }
  };
  __settingsRoot = createRoot(el);
  __settingsRoot.render(
    /* @__PURE__ */ jsx5(React2.StrictMode, { children: /* @__PURE__ */ jsx5(App_default, { name: profile.name, age: profile.age, avatar: profile.avatar, onBack }) })
  );
};
window.__FRA_UNMOUNT_SETTINGS__ = function() {
  try {
    if (__settingsRoot) {
      __settingsRoot.unmount();
      __settingsRoot = null;
    }
  } catch (_) {
    __settingsRoot = null;
  }
};

  
// ------------------------------
// Flappy Bird (Frame18) bundle (from web2)
// ------------------------------
const GAME18_WIDTH = 912;
const GAME18_HEIGHT = 422;

const GameState18 = {
  START: "START",
  PLAYING: "PLAYING",
  GAME_OVER: "GAME_OVER",
};

const SETTINGS18 = {
  gravity: 0.15,
  jumpStrength: -3.8,
  pipeSpeed: 2.0,
  pipeWidth: 60,
  pipeGap: 170,
  birdSize: 34,
  groundHeight: 100,
};

const COLORS18 = {
  sky: "#70c5ce",
  ground: "#ded895",
  pipe: "#73bf2e",
  pipeBorder: "#543847",
  bird: "#f7d308",
};

class SoundService18 {
  constructor() { this.ctx = null; }
  init() {
    if (!this.ctx) this.ctx = new (window.AudioContext || window.webkitAudioContext)();
    if (this.ctx && this.ctx.state === "suspended") this.ctx.resume();
  }
  playFlap() {
    this.init(); if (!this.ctx) return;
    const osc = this.ctx.createOscillator();
    const gain = this.ctx.createGain();
    osc.type = "triangle";
    osc.frequency.setValueAtTime(150, this.ctx.currentTime);
    osc.frequency.exponentialRampToValueAtTime(400, this.ctx.currentTime + 0.1);
    const gv = typeof window.__FRA_VOLUME__ === "number" ? window.__FRA_VOLUME__ : 1;
    gain.gain.setValueAtTime(0.3 * Math.max(0, Math.min(1, gv)), this.ctx.currentTime);
    gain.gain.exponentialRampToValueAtTime(0.01, this.ctx.currentTime + 0.1);
    osc.connect(gain); gain.connect(this.ctx.destination);
    osc.start(); osc.stop(this.ctx.currentTime + 0.1);
  }
  playScore() {
    this.init(); if (!this.ctx) return;
    const osc = this.ctx.createOscillator();
    const gain = this.ctx.createGain();
    osc.type = "sine";
    osc.frequency.setValueAtTime(800, this.ctx.currentTime);
    osc.frequency.setValueAtTime(1200, this.ctx.currentTime + 0.05);
    const gv = typeof window.__FRA_VOLUME__ === "number" ? window.__FRA_VOLUME__ : 1;
    gain.gain.setValueAtTime(0.1 * Math.max(0, Math.min(1, gv)), this.ctx.currentTime);
    gain.gain.exponentialRampToValueAtTime(0.01, this.ctx.currentTime + 0.2);
    osc.connect(gain); gain.connect(this.ctx.destination);
    osc.start(); osc.stop(this.ctx.currentTime + 0.2);
  }
  playCrash() {
    this.init(); if (!this.ctx) return;
    const osc = this.ctx.createOscillator();
    const gain = this.ctx.createGain();
    osc.type = "square";
    osc.frequency.setValueAtTime(200, this.ctx.currentTime);
    osc.frequency.linearRampToValueAtTime(50, this.ctx.currentTime + 0.3);
    const gv = typeof window.__FRA_VOLUME__ === "number" ? window.__FRA_VOLUME__ : 1;
    gain.gain.setValueAtTime(0.2 * Math.max(0, Math.min(1, gv)), this.ctx.currentTime);
    gain.gain.linearRampToValueAtTime(0.01, this.ctx.currentTime + 0.3);
    osc.connect(gain); gain.connect(this.ctx.destination);
    osc.start(); osc.stop(this.ctx.currentTime + 0.3);
  }
}
const sounds18 = new SoundService18();

class BLEService18 {
  constructor() {
    this.device = null;
    this.onMessageCallback = null;
    this.isConnecting = false;
  }
  async connect() {
    if (this.isConnecting) return false;
    if (this.device && this.device.gatt && this.device.gatt.connected) return true;

    const bluetooth = navigator.bluetooth;
    if (!bluetooth) {
      console.error("Web Bluetooth is not supported in this browser.");
      return false;
    }

    this.isConnecting = true;
    try {
      const SERVICE_BIRD = "a158cb5d-0bc0-4752-a562-0a7ce2efe51e";
      const CHAR_BIRD = "de3b7cbd-ce7e-448b-87e7-cb9f0cb39d92";

      this.device = await bluetooth.requestDevice({
        filters: [{ name: "FARALPHA" }, { services: [SERVICE_BIRD] }],
        optionalServices: [SERVICE_BIRD],
      });

      const server = await this.device.gatt.connect();
      const service = await server.getPrimaryService(SERVICE_BIRD);
      const characteristic = await service.getCharacteristic(CHAR_BIRD);

      await characteristic.startNotifications();
      characteristic.addEventListener("characteristicvaluechanged", (event) => {
        const value = event.target.value;
        const decoder = new TextDecoder("utf-8");
        const message = decoder.decode(value).trim();
        if (this.onMessageCallback) this.onMessageCallback(message);
      });

      this.device.addEventListener("gattserverdisconnected", () => {
        this.device = null;
      });

      this.isConnecting = false;
      return true;
    } catch (err) {
      console.error("BLE Connection Error:", err);
      this.isConnecting = false;
      this.device = null;
      return false;
    }
  }
  onMessage(callback) { this.onMessageCallback = callback; }
  disconnect() {
    try { if (this.device && this.device.gatt && this.device.gatt.connected) this.device.gatt.disconnect(); } catch(_) {}
    this.device = null;
  }
}
const bleService18 = new BLEService18();

async function getAICommentary18(score, reason) {
  // Use existing /api/chat.js (Groq) as a proxy
  const prompt = `You are a witty, slightly snarky arcade game commentator.
The player just died in Flappy Bird with a score of ${score}.
The reason for death was: ${reason}.
Provide a very short (max 15 words) sarcastic or encouraging comment in a retro gamer tone.`;

  try {
    const profile = (typeof getActiveProfile === "function") ? getActiveProfile() : null;
    const res = await fetch("/api/chat", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ type: "community", message: prompt, history: [], profile })
    });
    const data = await res.json().catch(() => null);
    const txt = (data && (data.reply || data.text || data.message)) ? String(data.reply || data.text || data.message) : "";
    return (txt || "Ouch. That had to hurt.").trim().slice(0, 120);
  } catch (e) {
    return "Ouch. That had to hurt.";
  }
}

function FlappyBirdApp18() {
  const React18 = React;
  const { useState, useEffect, useCallback, useRef } = React18;

  const [gameState, setGameState] = useState(GameState18.START);
  const [score, setScore] = useState(0);
  const [highScore, setHighScore] = useState(0);
  const [isBleConnected, setIsBleConnected] = useState(false);
  const [isConnecting, setIsConnecting] = useState(false);
  const [bleError, setBleError] = useState(null);
  const [commentary, setCommentary] = useState("");

  const canvasRef = useRef(null);
  const requestRef = useRef(undefined);
  const lastTimeRef = useRef(0);

  const birdRef = useRef({ y: GAME18_HEIGHT / 2, velocity: 0, rotation: 0 });
  const pipesRef = useRef([]);
  const cloudsRef = useRef([]);
  const scoreRef = useRef(0);
  const pipeSpawnTimerRef = useRef(0);
  const groundOffsetRef = useRef(0);
  const lastBleStateRef = useRef("0");

  useEffect(() => {
    const initialClouds = [];
    for (let i = 0; i < 7; i++) {
      initialClouds.push({
        x: Math.random() * GAME18_WIDTH,
        y: 20 + Math.random() * 100,
        speed: 0.15 + Math.random() * 0.3,
        scale: 0.6 + Math.random() * 0.8,
        opacity: 0.3 + Math.random() * 0.4,
      });
    }
    cloudsRef.current = initialClouds;
  }, []);

  const resetGameLogic = useCallback(() => {
    birdRef.current = { y: GAME18_HEIGHT / 2, velocity: 0, rotation: 0 };
    pipesRef.current = [];
    scoreRef.current = 0;
    pipeSpawnTimerRef.current = 0;
    setScore(0);
    setCommentary("");
  }, []);

  const handleGameOver = useCallback((reason) => {
    setGameState(GameState18.GAME_OVER);
    sounds18.playCrash();
    if (scoreRef.current > highScore) setHighScore(scoreRef.current);
    getAICommentary18(scoreRef.current, reason).then(setCommentary);
  }, [highScore]);

  const startGame = useCallback(() => {
    resetGameLogic();
    setGameState(GameState18.PLAYING);
    sounds18.playFlap();
    lastTimeRef.current = performance.now();
  }, [resetGameLogic]);

  const goToHome = useCallback(() => {
    resetGameLogic();
    setGameState(GameState18.START);
  }, [resetGameLogic]);

  const handleInput = useCallback(() => {
    if (gameState === GameState18.START) {
      startGame();
    } else if (gameState === GameState18.PLAYING) {
      birdRef.current.velocity = SETTINGS18.jumpStrength;
      sounds18.playFlap();
    }
  }, [gameState, startGame]);

  const handleInputRef = useRef(handleInput);
  useEffect(() => { handleInputRef.current = handleInput; }, [handleInput]);

  const connectBle = async (e) => {
    if (e) e.stopPropagation();
    setIsConnecting(true);
    setBleError(null);
    const success = await bleService18.connect();
    setIsBleConnected(success);
    setIsConnecting(false);
    if (!success) {
      setBleError("Connection Failed. Check Bluetooth/Device.");
      setTimeout(() => setBleError(null), 3000);
    }
  };

  useEffect(() => {
    bleService18.onMessage((msg) => {
      const cleanMsg = String(msg || "").trim().toLowerCase();
      const isPressed = cleanMsg === "1" || cleanMsg === "on" || cleanMsg === "true";
      if (isPressed && lastBleStateRef.current === "0") {
        handleInputRef.current();
      }
      lastBleStateRef.current = isPressed ? "1" : "0";
    });
  }, []);

  const drawBird = (ctx, b) => {
    ctx.save();
    ctx.translate(50 + SETTINGS18.birdSize / 2, b.y + SETTINGS18.birdSize / 2);
    ctx.rotate((b.rotation * Math.PI) / 180);
    ctx.fillStyle = COLORS18.bird;
    ctx.strokeStyle = "#000";
    ctx.lineWidth = 2;
    ctx.beginPath();
    ctx.roundRect(-SETTINGS18.birdSize / 2, -SETTINGS18.birdSize / 2, SETTINGS18.birdSize, SETTINGS18.birdSize, 8);
    ctx.fill();
    ctx.stroke();
    ctx.fillStyle = "#fff";
    ctx.beginPath(); ctx.arc(6, -6, 5, 0, Math.PI * 2); ctx.fill(); ctx.stroke();
    ctx.fillStyle = "#000";
    ctx.beginPath(); ctx.arc(8, -6, 2, 0, Math.PI * 2); ctx.fill();
    ctx.fillStyle = "#f97316";
    ctx.beginPath(); ctx.roundRect(SETTINGS18.birdSize / 2 - 4, 0, 10, 8, 2); ctx.fill(); ctx.stroke();
    ctx.fillStyle = "#fff";
    ctx.beginPath(); ctx.roundRect(-SETTINGS18.birdSize / 2 + 2, 2, 12, 10, 4); ctx.fill(); ctx.stroke();
    ctx.restore();
  };

  const drawCloud = (ctx, cloud) => {
    ctx.save();
    ctx.globalAlpha = cloud.opacity;
    ctx.fillStyle = "#FFFFFF";
    const baseW = 45 * cloud.scale;
    ctx.beginPath();
    ctx.arc(cloud.x, cloud.y, baseW, 0, Math.PI * 2);
    ctx.arc(cloud.x + baseW * 0.7, cloud.y - baseW * 0.3, baseW * 0.8, 0, Math.PI * 2);
    ctx.arc(cloud.x + baseW * 1.3, cloud.y, baseW * 0.9, 0, Math.PI * 2);
    ctx.fill();
    ctx.restore();
  };

  const update = useCallback((time) => {
    const canvas = canvasRef.current;
    if (!canvas) return;
    const ctx = canvas.getContext("2d");
    if (!ctx) return;

    const dt = Math.min((time - lastTimeRef.current) / 16.67, 2.5);
    lastTimeRef.current = time;

    cloudsRef.current.forEach((c) => {
      c.x -= c.speed * dt;
      if (c.x < -180) c.x = GAME18_WIDTH + 180;
    });

    if (gameState === GameState18.PLAYING) {
      birdRef.current.velocity += SETTINGS18.gravity * dt;
      birdRef.current.y += birdRef.current.velocity * dt;
      birdRef.current.rotation = Math.min(Math.max(birdRef.current.velocity * 4, -25), 90);

      if (birdRef.current.y + SETTINGS18.birdSize > GAME18_HEIGHT - SETTINGS18.groundHeight) {
        handleGameOver("Ground collision");
      }

      pipesRef.current.forEach((p) => {
        p.x -= SETTINGS18.pipeSpeed * dt;

        if (p.x + SETTINGS18.pipeWidth > 50 && p.x < 50 + SETTINGS18.birdSize) {
          if (birdRef.current.y < p.topHeight || birdRef.current.y + SETTINGS18.birdSize > p.topHeight + SETTINGS18.pipeGap) {
            handleGameOver("Pipe collision");
          }
        }

        if (!p.passed && p.x + SETTINGS18.pipeWidth < 50) {
          p.passed = true;
          scoreRef.current++;
          setScore(scoreRef.current);
          sounds18.playScore();
        }
      });

      pipesRef.current = pipesRef.current.filter((p) => p.x > -100);

      pipeSpawnTimerRef.current += dt;
      if (pipeSpawnTimerRef.current > 120) {
        pipeSpawnTimerRef.current = 0;
        const h = 60 + Math.random() * (GAME18_HEIGHT - SETTINGS18.pipeGap - SETTINGS18.groundHeight - 120);
        pipesRef.current.push({ id: Date.now(), x: GAME18_WIDTH, topHeight: h, passed: false });
      }

      groundOffsetRef.current = (groundOffsetRef.current + SETTINGS18.pipeSpeed * dt) % 40;
    }

    // draw
    ctx.fillStyle = COLORS18.sky;
    ctx.fillRect(0, 0, GAME18_WIDTH, GAME18_HEIGHT);

    cloudsRef.current.forEach((c) => drawCloud(ctx, c));

    pipesRef.current.forEach((p) => {
      ctx.fillStyle = COLORS18.pipe;
      ctx.strokeStyle = "#000";
      ctx.lineWidth = 3;
      ctx.fillRect(p.x, 0, SETTINGS18.pipeWidth, p.topHeight);
      ctx.strokeRect(p.x, -5, SETTINGS18.pipeWidth, p.topHeight + 5);
      const bY = p.topHeight + SETTINGS18.pipeGap;
      ctx.fillRect(p.x, bY, SETTINGS18.pipeWidth, GAME18_HEIGHT - bY);
      ctx.strokeRect(p.x, bY, SETTINGS18.pipeWidth, GAME18_HEIGHT - bY);
    });

    const gY = GAME18_HEIGHT - SETTINGS18.groundHeight;
    ctx.fillStyle = COLORS18.ground;
    ctx.fillRect(0, gY, GAME18_WIDTH, SETTINGS18.groundHeight);
    ctx.strokeStyle = "#000";
    ctx.lineWidth = 4;
    ctx.strokeRect(-2, gY, GAME18_WIDTH + 4, 110);

    ctx.fillStyle = "rgba(0,0,0,0.06)";
    for (let i = 0; i < GAME18_WIDTH + 40; i += 40) ctx.fillRect(i - groundOffsetRef.current, gY, 20, 110);

    drawBird(ctx, birdRef.current);

    requestRef.current = requestAnimationFrame(update);
  }, [gameState, handleGameOver]);

  useEffect(() => {
    requestRef.current = requestAnimationFrame(update);
    return () => {
      if (requestRef.current) cancelAnimationFrame(requestRef.current);
    };
  }, [update]);

  useEffect(() => {
    const canvas = canvasRef.current;
    if (!canvas) return;
    const dpr = window.devicePixelRatio || 1;
    canvas.width = GAME18_WIDTH * dpr;
    canvas.height = GAME18_HEIGHT * dpr;
    canvas.style.width = `${GAME18_WIDTH}px`;
    canvas.style.height = `${GAME18_HEIGHT}px`;
    const ctx = canvas.getContext("2d");
    if (ctx) ctx.scale(dpr, dpr);
  }, []);

  useEffect(() => {
    const handleKey = (e) => {
      if (e.code === "Space" || e.code === "ArrowUp") handleInput();
    };
    window.addEventListener("keydown", handleKey);
    return () => window.removeEventListener("keydown", handleKey);
  }, [handleInput]);

  return React18.createElement(
    "div",
    { className: "flappy-react-wrap flex items-center justify-center w-full h-full bg-slate-950 overflow-hidden select-none touch-none", onClick: () => handleInput() },
    React18.createElement(
      "div",
      { className: "relative overflow-hidden bg-black pixel-shadow border-4 border-black", style: { width: GAME18_WIDTH, height: GAME18_HEIGHT } },
      React18.createElement("canvas", { ref: canvasRef, className: "block w-full h-full" }),
      React18.createElement(
        "div",
        { className: "absolute top-4 right-4 z-[60] flex flex-col items-end gap-2" },
        !isBleConnected
          ? React18.createElement(
              "div",
              { className: "flex flex-col items-end gap-1" },
              React18.createElement(
                "button",
                {
                  onClick: connectBle,
                  disabled: isConnecting,
                  className:
                    `px-4 py-2 rounded-xl text-[10px] font-bold border-b-4 transition-all ${
                      isConnecting ? "bg-gray-500 border-gray-700" : "bg-blue-500 border-blue-700 active:border-b-0 active:translate-y-1"
                    } text-white`,
                },
                isConnecting ? "SEARCHING..." : "CONNECT SENSOR"
              ),
              bleError ? React18.createElement("div", { className: "text-[8px] text-red-400 bg-red-950/50 px-2 py-1 rounded" }, bleError) : null
            )
          : React18.createElement(
              "div",
              { className: "flex items-center gap-2 bg-green-500/90 px-3 py-1 rounded-full text-white text-[8px] animate-pulse font-mono border border-white/20" },
              React18.createElement("div", { className: "w-1.5 h-1.5 bg-white rounded-full" }),
              "FARALPHA CONNECTED"
            )
      ),
      React18.createElement(
        "div",
        { className: "absolute top-10 left-0 right-0 text-center pointer-events-none z-40" },
        React18.createElement("h1", { className: "text-white text-5xl drop-shadow-[4px_4px_0px_rgba(0,0,0,0.5)]" }, String(score))
      ),
      gameState === GameState18.START
        ? React18.createElement(
            "div",
            { className: "absolute inset-0 z-50 flex flex-col items-center justify-center bg-black/40 text-white" },
            React18.createElement(
              "div",
              { className: "bg-white/10 backdrop-blur-md p-10 rounded-3xl border-4 border-white pixel-shadow text-center animate-bob" },
              React18.createElement("h2", { className: "text-3xl mb-4 text-yellow-400 font-bold" }, "FLAPPY BIRD"),
              React18.createElement(
                "p",
                { className: "text-xs mb-8 text-white/80 uppercase tracking-widest font-mono" },
                isBleConnected ? "Ready! Tap sensor to start" : "Tap screen or connect sensor"
              ),
              React18.createElement("div", { className: "text-[10px] text-white/50 animate-pulse uppercase" }, "Tap screen to Start")
            )
          )
        : null,
      gameState === GameState18.GAME_OVER
        ? React18.createElement(
            "div",
            { className: "absolute inset-0 z-50 flex flex-col items-center justify-center bg-red-900/40 p-4" },
            React18.createElement(
              "div",
              { className: "bg-white p-6 rounded-2xl border-4 border-black pixel-shadow text-black text-center w-full max-w-[340px]" },
              React18.createElement("h2", { className: "text-2xl text-red-600 mb-2 font-bold font-mono uppercase tracking-tighter" }, "Crashed!"),
              React18.createElement("p", { className: "text-[10px] italic text-gray-700 bg-gray-100 p-3 rounded-xl mb-4 leading-relaxed" }, `"${commentary}"`),
              React18.createElement(
                "div",
                { className: "flex justify-around mb-4 border-y-2 border-gray-100 py-4 font-bold" },
                React18.createElement("div", null,
                  React18.createElement("p", { className: "text-[8px] text-gray-400 uppercase" }, "Score"),
                  React18.createElement("p", { className: "text-2xl" }, String(score))
                ),
                React18.createElement("div", null,
                  React18.createElement("p", { className: "text-[8px] text-gray-400 uppercase" }, "Best"),
                  React18.createElement("p", { className: "text-2xl" }, String(highScore))
                )
              ),
              React18.createElement(
                "div",
                { className: "flex gap-4" },
                React18.createElement(
                  "button",
                  { className: "flex-1 bg-yellow-400 py-4 border-b-6 border-yellow-600 active:border-b-0 rounded-xl font-bold text-xs", onClick: (e) => { e.stopPropagation(); startGame(); } },
                  "RETRY"
                ),
                React18.createElement(
                  "button",
                  { className: "flex-1 bg-blue-500 py-4 border-b-6 border-blue-700 active:border-b-0 rounded-xl font-bold text-xs text-white", onClick: (e) => { e.stopPropagation(); goToHome(); } },
                  "HOME"
                )
              )
            )
          )
        : null
    )
  );
}

let __flappyRoot18 = null;
window.__FRA_MOUNT_FLAPPY__ = function() {
  const el = document.getElementById("flappyRoot");
  if (!el) return;
  if (__flappyRoot18) return;

  const backBtn = document.getElementById("frame18BackBtn");
  if (backBtn && backBtn.dataset.bound !== "1") {
    backBtn.dataset.bound = "1";
    backBtn.addEventListener("click", (e) => {
      e.preventDefault();
      e.stopPropagation();
      if (typeof window.__FRA_GO_FRAME6_COMMUNITY__ === "function") window.__FRA_GO_FRAME6_COMMUNITY__();
      else if (typeof window.__FRA_GO_FRAME__ === "function") window.__FRA_GO_FRAME__(6);
      else location.hash = "#frame6";
    });
  }

  __flappyRoot18 = createRoot(el);
  __flappyRoot18.render(React.createElement(React.StrictMode, null, React.createElement(FlappyBirdApp18, null)));
};
window.__FRA_UNMOUNT_FLAPPY__ = function() {
  try {
    if (__flappyRoot18) {
      __flappyRoot18.unmount();
      __flappyRoot18 = null;
    }
  } catch (_) {
    __flappyRoot18 = null;
  }
};

</script>


  <!-- BLE Connect Modal -->
  <div class="ble-modal hidden" id="bleModal" aria-hidden="true">
    <div class="ble-modal-card" role="dialog" aria-modal="true" aria-labelledby="bleModalTitle">
      <div class="ble-modal-title" id="bleModalTitle">Connect Bluetooth</div>
      <div class="ble-modal-text" id="bleModalText">
        Please tap <b>Connect</b>, then select <b>FARALPHA</b> from the Bluetooth picker.
      </div>
      <div class="ble-modal-actions">
        <button class="ble-btn ble-btn-ghost" id="bleModalCancelBtn" type="button">Cancel</button>
        <button class="ble-btn ble-btn-primary" id="bleModalConnectBtn" type="button">Connect</button>
      </div>
    </div>
  </div>

  <!-- BLE Loading -->
  <div class="ble-loading hidden" id="bleLoading" aria-hidden="true">
    <div class="ble-loading-card">
      <div class="ble-spinner" aria-hidden="true"></div>
      <div class="ble-loading-text" id="bleLoadingText">Connecting...</div>
    </div>
  </div>

  <!-- BLE Toast -->
  <div class="ble-toast hidden" id="bleToast" aria-live="polite">Connected successfully.</div>

</body>
</html>












