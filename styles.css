/* =========================
   GLOBAL FIX FOR iPhone Safari
   ========================= */

:root{
  --purple: rgba(99,26,173,0.92);
  --purple-soft: rgba(99,26,173,0.28);
}

*{
  box-sizing:border-box;
  margin:0;
  padding:0;

  touch-action: manipulation;

  -webkit-touch-callout:none;
  -webkit-user-select:none;
  user-select:none;
}

input, textarea, select{
  -webkit-user-select:text;
  user-select:text;
  touch-action: manipulation;
}

html, body{
  width:100%;
  height:100%;
  overflow:hidden;
  touch-action: pan-y;
}

body{
  background:url("Pic4.png") center/cover no-repeat;
  background-color:#b3ebf2;
  font-family:"Poppins", sans-serif;
}

.hidden{ display:none !important; }

/* ✅ Make clickable stuff easier on iPhone */
.option-card, .frame2-btn-left, .frame2-btn-right, .frame2-close,
.frame3-btn-left, .frame3-btn-right, .frame4-btn-left, .frame4-btn-right,
.frame6-tab, .frame6-card, .chat-icon, .mini-btn, .thread-item,
.profile-card, .profile-option, .frame6-profile,
.quiz-primary, .quiz-secondary, .quiz-choice, .quiz-back, 
.game-primary, .game-secondary, .toggle-btn, .ttt-cell, .game-back{
  cursor:pointer;
  -webkit-tap-highlight-color: rgba(0,0,0,0);
}

/* ✅ BOOT LOADER */
.boot-loader{
  position:fixed;
  inset:0;
  width:100vw;
  height:100vh;
  z-index:100000;
  display:flex;
  align-items:center;
  justify-content:center;
  background:radial-gradient(circle at 30% 30%, rgba(255,255,255,0.85), rgba(179,235,242,0.95));
  backdrop-filter:blur(6px);
  pointer-events:auto;
}

.boot-card{
  width:min(520px, 92vw);
  border-radius:24px;
  background:rgba(255,255,255,0.7);
  border:1px solid rgba(255,255,255,0.7);
  box-shadow:0 12px 28px rgba(0,0,0,0.12);
  padding:22px 22px 18px;
  text-align:center;
}

.boot-title{
  font-size:20px;
  font-weight:900;
  color:rgba(99,26,173,0.95);
  letter-spacing:0.2px;
  margin-bottom:10px;
}

.boot-sub{
  font-size:13px;
  font-weight:600;
  color:rgba(0,0,0,0.55);
  margin-bottom:18px;
}

.boot-bar{
  width:100%;
  height:10px;
  border-radius:999px;
  background:rgba(0,0,0,0.08);
  overflow:hidden;
}

.boot-bar > div{
  height:100%;
  width:0%;
  border-radius:999px;
  background:linear-gradient(90deg, rgba(121,170,170,0.95), rgba(150,215,198,0.95));
  transition:width 0.12s ease;
}

.boot-row{
  margin-top:12px;
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap:12px;
  font-size:12px;
  color:rgba(0,0,0,0.55);
  font-weight:700;
}

.boot-spin{
  width:18px;
  height:18px;
  border-radius:999px;
  border:3px solid rgba(0,0,0,0.10);
  border-top-color:rgba(99,26,173,0.65);
  animation:spin 0.8s linear infinite;
  flex:0 0 auto;
}
@keyframes spin{ to{ transform:rotate(360deg); } }

/* ✅ MODAL (Delete confirm) */
.modal{
  position:fixed;
  inset:0;
  width:100vw;
  height:100vh;
  z-index:120000;
  display:none;
  align-items:center;
  justify-content:center;
  background:rgba(0,0,0,0.35);
  backdrop-filter:blur(4px);
  pointer-events:auto;
}
.modal.show{ display:flex; }

.modal-card{
  width:min(420px, 90vw);
  border-radius:22px;
  background:rgba(255,255,255,0.92);
  border:1px solid rgba(255,255,255,0.8);
  box-shadow:0 14px 34px rgba(0,0,0,0.22);
  padding:18px;
}
.modal-title{
  font-weight:900;
  font-size:18px;
  color:rgba(0,0,0,0.75);
}
.modal-sub{
  margin-top:6px;
  font-weight:700;
  font-size:13px;
  color:rgba(0,0,0,0.55);
}
.modal-actions{
  margin-top:14px;
  display:flex;
  justify-content:flex-end;
  gap:10px;
}
.modal-btn{
  height:36px;
  padding:0 14px;
  border-radius:12px;
  border:1px solid rgba(0,0,0,0.12);
  font-weight:900;
  font-size:13px;
  touch-action: manipulation;
}
.modal-btn.ghost{
  background:rgba(255,255,255,0.85);
  color:rgba(0,0,0,0.65);
}
.modal-btn.danger{
  background:rgba(99,26,173,0.92);
  border-color:rgba(99,26,173,0.3);
  color:#fff;
}

/* ✅ VIDEO */
.frame-video{
  position:fixed;
  inset:0;
  width:100vw;
  height:100vh;
  background:#000;
  display:flex;
  align-items:center;
  justify-content:center;
  z-index:9999;
  pointer-events:none;
}
.frame-video video{
  width:100%;
  height:100%;
  object-fit:cover;
  border:none;
}

/* ✅ Z-INDEX */
.frame-1{ z-index:1; }
.frame-2, .frame-3, .frame-4, .frame-5, .frame-6, .frame-7, .frame-avatar,
.frame-8, .frame-9, .frame-10, .frame-11, .frame-12, .frame-13, .frame-14{ z-index:2; }

/* FRAME 1 */
.frame-1{
  position:fixed;
  inset:0;
  width:100vw;
  height:100vh;
  background:transparent;
  overflow:hidden;
  display:block;
}

.main-picture{
  position:absolute;
  left:4.8%;
  top:10.4%;
  width:32.5%;
  height:94.4%;
  border-radius:24px;
  overflow:hidden;
}
.main-picture img{ width:100%; height:100%; object-fit:cover; }

.title{
  position:absolute;
  left:52.1%;
  top:18.0%;
  font-weight:900;
  font-size:2.2rem;
  color:#631aad;
}

.subtitle{
  position:absolute;
  left:52.1%;
  top:28.8%;
  width:43.5%;
  font-weight:600;
  font-size:1.2rem;
  line-height:1.3;
  color:#631aad;
}

.option-card{
  position:absolute;
  left:52.1%;
  width:43.5%;
  height:15.8%;
  border-radius:18px;
  overflow:hidden;
  display:flex;
  align-items:center;
  justify-content:center;
  touch-action: manipulation;
  -webkit-tap-highlight-color: rgba(0,0,0,0);
}
.option-card-1{ top:48.4%; }
.option-card-2{ top:70.3%; }
.option-card img{ width:100%; height:100%; object-fit:contain; }

/* FRAME 2 */
.frame-2{
  position:fixed;
  inset:0;
  width:100vw;
  height:100vh;
  background:url("Pic5.png") center/cover no-repeat;
  overflow:hidden;
  display:none;
}

.slider-wrapper{
  position:absolute;
  left:10.1%;
  top:10.6%;
  width:79.9%;
  height:68.5%;
  border-radius:16px;
  overflow:hidden;
}
#slider{ touch-action: pan-y; }

.slider{
  width:300%;
  height:100%;
  display:flex;
  transition:transform 0.25s ease;
  will-change: transform;
}

.slide{
  width:33.3333%;
  height:100%;
  flex-shrink:0;
  display:flex;
  align-items:center;
  justify-content:center;
}
.slide img{ width:100%; height:100%; object-fit:contain; }

.frame2-btn-left, .frame2-btn-right{
  position:absolute;
  top:80.2%;
  width:16.4%;
  height:14.0%;
  border-radius:12px;
  overflow:hidden;
  display:flex;
  align-items:center;
  justify-content:center;
  touch-action: manipulation;
}
.frame2-btn-left{ left:6.0%; }
.frame2-btn-right{ left:77.5%; }
.frame2-btn-left img, .frame2-btn-right img{ width:100%; height:100%; object-fit:contain; }

.frame2-dot{
  position:absolute;
  top:84.0%;
  width:1.65%;
  height:3.38%;
  border-radius:50%;
}
.frame2-dot-1{ left:46.7%; }
.frame2-dot-2{ left:49.2%; }
.frame2-dot-3{ left:51.8%; }

.frame2-close{
  position:absolute;
  left:90.5%;
  top:7.2%;
  width:4.7%;
  height:6.8%;
  touch-action: manipulation;
}
.frame2-close img{ width:100%; height:100%; object-fit:contain; }

/* FRAME 3 */
.frame-3{
  position:fixed;
  inset:0;
  width:100vw;
  height:100vh;
  background:url("Pic12.png") center/cover no-repeat;
  overflow:hidden;
  display:none;
}

.frame3-btn-left, .frame3-btn-right{
  position:absolute;
  top:80.2%;
  width:16.4%;
  height:14.0%;
  border-radius:12px;
  overflow:hidden;
  display:flex;
  align-items:center;
  justify-content:center;
  touch-action: manipulation;
}
.frame3-btn-left{ left:6.0%; }
.frame3-btn-right{ left:77.5%; }
.frame3-btn-left img, .frame3-btn-right img{ width:100%; height:100%; object-fit:contain; }

.nickname-input{
  position:absolute;
  left:57.9%;
  top:50%;
  width:25%;
  border:none;
  background:transparent;
  font-size:1rem;
  font-weight:700;
  color:#000;
  font-family:"Poppins", sans-serif;
  outline:none;
}
.nickname-input::placeholder{ color:#000; opacity:1; }

.profile-avatar{
  position:absolute;
  left:68.1%;
  top:14.9%;
  width:14.5%;
  height:29.7%;
  border-radius:50%;
  overflow:hidden;
  display:flex;
  align-items:center;
  justify-content:center;
  touch-action: manipulation;
}
.profile-avatar img{ width:100%; height:100%; object-fit:cover; }

/* AVATAR FRAME */
.frame-avatar{
  position:fixed;
  inset:0;
  width:100vw;
  height:100vh;
  background:url("Pic14.png") center/cover no-repeat;
  overflow:hidden;
  display:none;
}

.profile-option{
  position:absolute;
  width:14.7%;
  height:30.2%;
  border-radius:50%;
  overflow:hidden;
  display:flex;
  align-items:center;
  justify-content:center;
  touch-action: manipulation;
}
.profile-option img{ width:100%; height:100%; object-fit:cover; }

.profile-1{ left:6.0%; top:24.6%; }
.profile-2{ left:24.3%; top:24.6%; }
.profile-3{ left:42.5%; top:24.3%; }
.profile-4{ left:61.1%; top:23.9%; }
.profile-5{ left:79.2%; top:23.9%; }
.profile-6{ left:6.1%; top:62.4%; }
.profile-7{ left:24.5%; top:62.4%; }
.profile-8{ left:42.8%; top:62.4%; }
.profile-9{ left:61.1%; top:62.4%; }
.profile-10{ left:79.2%; top:62.4%; }

/* FRAME 4 */
.frame-4{
  position:fixed;
  inset:0;
  width:100vw;
  height:100vh;
  background:url("Pic15.png") center/cover no-repeat;
  overflow:hidden;
  display:none;
}

.age-title{
  position:absolute;
  top:11%;
  left:50%;
  transform:translateX(-50%);
  width:86%;
  font-weight:700;
  font-size:16px;
  color:rgba(99,26,173,0.78);
  text-align:center;
  line-height:1.35;
}

.frame4-btn-left, .frame4-btn-right{
  position:absolute;
  top:80.2%;
  width:16.4%;
  height:14.0%;
  border-radius:12px;
  overflow:hidden;
  display:flex;
  align-items:center;
  justify-content:center;
  touch-action: manipulation;
}
.frame4-btn-left{ left:6.0%; }
.frame4-btn-right{ left:77.5%; }
.frame4-btn-left img, .frame4-btn-right img{ width:100%; height:100%; object-fit:contain; }

/* ✅ Frame4 panel smaller + text & wheel tighter (MORE tighter again) */
.age-wheel-panel{
  position:absolute;
  left:50%;
  top:52%;
  transform:translate(-50%, -50%);
  width:min(500px, 84vw);
  height:228px;
  border-radius:18px;
  background:rgba(255,255,255,0.65);
  border:1px solid rgba(255,255,255,0.7);
  box-shadow:0 10px 22px rgba(0,0,0,0.12);

  display:flex;
  gap:2px;
  padding:10px 8px;
  align-items:center;
}

.age-wheel-left{
  flex:1;
  display:flex;
  flex-direction:column;
  justify-content:center;
  gap:1px;
  padding-left:0px;
}

.age-big{
  font-size:46px;
  font-weight:900;
  color:var(--purple);
  line-height:1;
}

.age-small{
  font-size:12px;
  font-weight:900;
  color:rgba(0,0,0,0.55);
}

.age-tip{
  font-size:11px;
  font-weight:900;
  color:rgba(0,0,0,0.38);
  margin-top:2px;
}

.age-wheel-right{
  width:132px;
  height:214px;
  position:relative;
  display:flex;
  align-items:center;
  justify-content:center;
}

/* ✅ item height == highlight height */
.age-wheel{
  width:132px;
  height:214px;
  border-radius:16px;
  background:rgba(255,255,255,0.55);
  border:1px solid rgba(0,0,0,0.08);
  overflow-y:auto;
  -webkit-overflow-scrolling:touch;
  scroll-snap-type:y mandatory;
  overscroll-behavior:contain;
  touch-action: pan-y;

  padding:70px 0;
}

.age-item{
  height:38px;
  display:flex;
  align-items:center;
  justify-content:center;
  font-weight:900;
  font-size:17px;
  line-height:38px;
  color:rgba(0,0,0,0.35);
  scroll-snap-align:center;
}

.age-item.active{
  color:var(--purple);
  font-size:20px;
}

.age-wheel-highlight{
  position:absolute;
  left:10px;
  right:10px;
  height:38px;
  border-radius:12px;
  border:2px solid var(--purple-soft);
  box-shadow:0 8px 18px rgba(99,26,173,0.10);
  pointer-events:none;
  top:50%;
  transform:translateY(-50%);
}

@media (max-width: 430px){
  .age-title{ font-size:15px; width:92%; top:10.5%; }
  .age-wheel-panel{ width:92vw; height:224px; gap:2px; padding:10px 8px; }
  .age-big{ font-size:44px; }
  .age-wheel-right{ width:128px; }
  .age-wheel{ width:128px; height:210px; padding:68px 0; }
  .age-item{ height:38px; line-height:38px; }
  .age-wheel-highlight{ height:38px; }
}

/* FRAME 5 */
.frame-5{
  position:fixed;
  inset:0;
  width:100vw;
  height:100vh;
  background:url("Pic15.png") center/cover no-repeat;
  overflow:hidden;
  display:none;
}

.done-title{
  position:absolute;
  top:12.4%;
  left:50%;
  transform:translateX(-50%);
  font-weight:900;
  font-size:32px;
  color:#631AAD;
  white-space:nowrap;
  text-align:center;
}
.done-subtitle{
  position:absolute;
  top:23.2%;
  left:50%;
  transform:translateX(-50%);
  font-weight:700;
  font-size:20px;
  color:rgba(99,26,173,0.75);
  white-space:nowrap;
  text-align:center;
}

.profiles-list{
  position:absolute;
  top:160px;
  left:50%;
  transform:translateX(-50%);
  width:100%;
  display:flex;
  justify-content:center;
  gap:24px;
  flex-wrap:nowrap;
  align-items:flex-start;
}

.profile-card{
  position:relative;
  width:160px;
  text-align:center;
  touch-action: manipulation;
}

.profile-card-avatar{
  width:116px;
  height:116px;
  margin:0 auto;
  border-radius:999px;
  overflow:hidden;
  border:6px solid #fff;
  box-shadow:2px 4px 8px rgba(0,0,0,0.25);
  opacity:0.95;
  position:relative;
  display:flex;
  align-items:center;
  justify-content:center;
}
.profile-card-avatar img{
  width:130%;
  height:130%;
  display:block;
  object-fit:cover;
  object-position:center;
}

.profile-name{
  margin-top:8px;
  font-weight:800;
  font-size:20px;
  color:rgba(99,26,173,0.75);
  word-break:break-word;
}

/* ✅ long-press overlay (Pic16) */
.profile-delete-overlay{
  position:absolute;
  inset:-10px;
  display:none;
  border-radius:999px;
  overflow:hidden;
  pointer-events:none;
}
.profile-delete-overlay img{
  width:100%;
  height:100%;
  object-fit:contain;
  opacity:0.95;
}
.profile-card.show-delete .profile-delete-overlay{ display:block; }

.profile-card.add-card .profile-card-avatar{
  border:none;
  box-shadow:none;
  width:75px;
  height:75px;
}
.profile-card.add-card .profile-card-avatar img{ width:100%; height:100%; object-fit:contain; }
.profile-card.add-card{ margin-top:20px; }

/* FRAME 6 */
.frame-6{
  position:fixed;
  inset:0;
  width:100vw;
  height:100vh;
  background:url("Pic17.png") center/cover no-repeat;
  overflow:hidden;
  display:none;
}

.frame6-profile{
  position:absolute;
  left:50px;
  top:25px;
  width:75px;
  height:75px;
  border-radius:999px;
  border:4px solid #fff;
  overflow:hidden;
  z-index:50;
  pointer-events:auto;
  touch-action: manipulation;
}
.frame6-profile img{
  width:100%;
  height:100%;
  object-fit:cover;
  display:block;
  pointer-events:auto;
}

.frame6-bluetooth{
  position:absolute;
  left:770px;
  top:42px;
  width:45px;
  height:45px;
}
.frame6-bluetooth img{ width:100%; height:100%; object-fit:contain; display:block; }

.frame6-tabs{
  position:absolute;
  left:0;
  top:0;
  width:100%;
  height:85px;
}

.frame6-tab-highlight{
  position:absolute;
  top:48px;
  left:174px;
  width:76px;
  height:33px;
  background-color:#631AAD;
  border-radius:8px;
  transition:all 0.25s ease;
  z-index:1;
}

.frame6-tab{
  position:absolute;
  top:53px;
  font-size:15px;
  font-weight:700;
  z-index:2;
  touch-action: manipulation;
}

#tabHome{ left:189px; color:rgba(255,255,255,1); }
#tabHealthcare{ left:274px; color:rgba(0,0,0,0.9); }
#tabSports{ left:389px; color:rgba(0,0,0,0.9); }
#tabEducation{ left:531px; color:rgba(0,0,0,0.9); }
#tabCommunity{ left:638px; color:rgba(0,0,0,0.9); }

.frame6-home-cards-wrapper{
  position:absolute;
  left:0;
  right:0;
  top:130px;
  bottom:0;
  overflow:hidden;
  -webkit-overflow-scrolling:touch;
  touch-action: pan-y;
}
#homeCards{ touch-action: pan-y; }

.frame6-home-cards{
  position:absolute;
  display:flex;
  flex-direction:row;
  gap:17px;
  padding-left:42px;
  padding-right:42px;
  transition:transform 0.25s ease;
  will-change:transform;
}

/* =========================================================
   ✅ FRAME 6 — PIN/UNPIN SYSTEM (OVERRIDE BLOCK)
   Paste this at the VERY END of styles.css
   ========================================================= */

/* card sizing (ตามที่คุณตั้งไว้) */
.frame6-card{
  flex:0 0 340px;
  height:210px;
  position:relative;
  touch-action: manipulation;
}

.frame6-card img{
  width:100%;
  height:100%;
  object-fit:contain;
  display:block;
  border-radius:16px;
}

/* =========================================================
   ✅ Fix_Menu button (tap target)
   app.js ใช้ .frame6-card-menu เป็นปุ่มเปิดวงกลม Pin/Unpin
   ========================================================= */
.frame6-card-menu{
  position:absolute;
  left:304px;          /* X304 */
  top:161px;           /* Y161 */
  width:6px;           /* Fix_Menu size */
  height:23.71px;      /* Fix_Menu size */
  padding:0;
  border:none;
  background:transparent;
  z-index:20;
  cursor:pointer;
}

/* ✅ เพิ่มพื้นที่กด (hit-area) 40x40 แต่ไม่โชว์วงกลม
   วงกลม “โชว์จริง” จะเป็น .frame6-pin-action ตอนเมนูเปิด */
.frame6-card-menu::after{
  content:"";
  position:absolute;
  left:-17px;
  top:-8px;
  width:40px;
  height:40px;
  background:transparent;
}

/* icon ภายในปุ่ม */
.frame6-card-menu img{
  width:6px;
  height:23.71px;
  object-fit:contain;
  display:block;
  pointer-events:none; /* ให้คลิกโดน wrapper */
}

/* =========================================================
   ✅ Pin/Unpin circle button (ถูกสร้างโดย app.js)
   class: .frame6-pin-action + .show
   ========================================================= */
.frame6-pin-action{
  position:absolute;

  /* center ของ Fix_Menu:
     centerX = 304 + 3 = 307
     centerY = 161 + 23.71/2 = 172.855
     วงกลม 40x40 => left=307-20=287, top=172.855-20=152.855
  */
  left:287px;
  top:152.855px;

  width:40px;
  height:40px;
  border:none;
  border-radius:999px;
  background: rgba(0,0,0,0.25);
  display:none;
  align-items:center;
  justify-content:center;
  z-index:30;
  padding:0;

  touch-action: manipulation;
  -webkit-tap-highlight-color: rgba(0,0,0,0);
}

.frame6-pin-action.show{
  display:flex;
}

.frame6-pin-action:active{
  transform:scale(0.98);
}

.frame6-pin-action img{
  width:22px;
  height:22px;
  display:block;
  pointer-events:none;
}

/* =========================================================
   ✅ Pinned badge marker (Pin_Header.png)
   app.js ใช้คลาส: .pin-badge (ไม่ใช่ .pin-header / .is-pinned)
   ========================================================= */
.frame6-card .pin-badge{
  position:absolute;
  left:0;
  top:0;
  width:44px;     /* ปรับได้ตามไฟล์จริง */
  height:44px;
  transform: translate(-50%, -50%); /* ใช้ “center” ของ PNG วางที่มุม */
  z-index:25;
  pointer-events:none;
  object-fit:contain;
  display:none;
  filter: drop-shadow(0 10px 14px rgba(0,0,0,0.18));
}

/* app.js จะสั่ง badge.style.display = block/none เอง */

/* =========================================================
   ✅ “menu-open” class (app.js ใส่/ถอดไว้)
   ตอนนี้เราไม่ต้องโชว์ popover box แล้ว
   แต่คงไว้เผื่ออนาคต ไม่ทำอะไรเพิ่มก็ได้
   ========================================================= */
.frame6-card.menu-open{}

/* =========================================================
   ✅ Prevent menu-related taps from triggering card tap
   ========================================================= */
.frame6-card-menu,
.frame6-pin-action,
.frame6-card-menu *{
  -webkit-tap-highlight-color: rgba(0,0,0,0);
}

/* FRAME 7 Chatbot (same as your existing) */
.frame-7{
  position:fixed;
  inset:0;
  width:100vw;
  height:100vh;
  overflow:hidden;
  display:none;
  background:url("Pic18.png") center/cover no-repeat;
}

.stage{
  position:absolute;
  left:50%;
  top:50%;
  width:864px;
  height:444px;
  transform:translate(-50%, -50%) scale(var(--s, 1));
  transform-origin:center center;
}

.chat-title{
  position:absolute;
  left:50%;
  top:35px;
  transform:translateX(-50%);
  font-weight:900;
  font-size:40px;
  line-height:1;
  background:linear-gradient(90deg, #79aaaa 0%, #96D7C6 100%);
  -webkit-background-clip:text;
  background-clip:text;
  color:transparent;
  -webkit-text-stroke:2px rgba(102,102,102,0.75);
  text-align:center;
  white-space:nowrap;
  pointer-events:none;
}

.chat-back{
  position:absolute;
  left:15px;
  top:25px;
  width:40px;
  height:40px;
  opacity:0.65;
  touch-action: manipulation;
}
.chat-back img{ width:100%; height:100%; object-fit:contain; display:block; }

.history-label{
  position:absolute;
  left:751px;
  top:78px;
  font-weight:900;
  font-size:12px;
  color:rgba(0,0,0,0.55);
  pointer-events:none;
}

.chat-history{
  position:absolute;
  left:50px;
  top:105px;
  width:674px;
  height:220px;

  overflow-y:auto;
  overflow-x:hidden;

  -webkit-overflow-scrolling:touch;
  touch-action: pan-y;
  overscroll-behavior: contain;

  pointer-events:auto;
  padding-right:10px;
}
.chat-history::-webkit-scrollbar{ width:6px; }
.chat-history::-webkit-scrollbar-thumb{ background:rgba(0,0,0,0.15); border-radius:99px; }

.msg-row{ width:100%; display:flex; margin:10px 0; }
.msg-row.user{ justify-content:flex-end; }
.msg-row.bot{ justify-content:flex-start; }

.bubble{
  max-width:520px;
  min-height:44px;
  padding:10px 14px;
  background:rgba(255,255,255,1);
  border:1px solid rgba(231,231,231,1);
  box-shadow:2px 3px 4px rgba(0,0,0,0.25);
  border-radius:12px;
  font-weight:700;
  font-size:15px;
  color:rgba(0,0,0,0.55);
  white-space:pre-wrap;
  word-break:break-word;
}
.bubble.bot{ background:rgba(255,255,255,0.85); }

.chat-history, .bubble{
  -webkit-user-select:text;
  user-select:text;
}

/* input area */
.chat-bottom{
  position:absolute;
  left:0;
  top:0;
  width:864px;
  height:444px;
  pointer-events:none;
}

.tap-to-ask{
  position:absolute;
  left:229px;
  top:365px;
  font-weight:800;
  font-size:20px;
  color:rgba(0,0,0,0.5);
  pointer-events:none;
  transition:opacity 0.15s ease;
}

.input-wrap{
  position:absolute;
  left:229px;
  top:360px;
  width:320px;
  height:40px;
  pointer-events:auto;
  touch-action: manipulation;
}

.chat-input{
  width:100%;
  height:100%;
  border:none;
  outline:none;
  background:transparent;
  font-weight:800;
  font-size:15px;
  color:rgba(0,0,0,0.55);
  padding:6px 8px;
  touch-action: manipulation;
}

.chat-icon{
  position:absolute;
  width:40px;
  height:40px;
  pointer-events:auto;
  touch-action: manipulation;
}

#chatAdd{ left:160px; top:360px; }
#chatMic{ left:530px; top:360px; }
#chatSend{ left:575px; top:360px; }

/* =========================
   RESTORE CHATBOT EXTRAS (Threads + Mic-lang + Voice)
   ========================= */

.voice-center{
  position:absolute;
  left:312px;
  top:342px;
  width:240px;
  height:50px;
  display:none;
  align-items:center;
  justify-content:center;
  gap:10px;
  pointer-events:none;
}

.voice-pill{
  width:150px;
  height:44px;
  border-radius:999px;
  background:rgba(255,255,255,0.8);
  border:1px solid rgba(231,231,231,1);
  box-shadow:2px 3px 4px rgba(0,0,0,0.18);
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  font-weight:700;
  color:rgba(0,0,0,0.55);
  pointer-events:none;
}
.voice-time{ font-size:12px; line-height:12px; }
.voice-wave{ font-size:12px; line-height:14px; letter-spacing:1px; }

/* Threads controls/panel */
.chat-threads-controls{
  position:absolute;
  left:751px;
  top:72px;
  width:155px;
  display:flex;
  justify-content:flex-end;
  z-index:40;
  pointer-events:auto;
}

.mini-btn{
  height:28px;
  padding:0 10px;
  border-radius:10px;
  border:1px solid rgba(0,0,0,0.12);
  background:rgba(255,255,255,0.75);
  font-weight:900;
  font-size:12px;
  color:rgba(0,0,0,0.65);
}

.chat-threads-panel{
  position:absolute;
  left:751px;
  top:105px;
  width:155px;
  height:220px;
  border-radius:16px;
  background:rgba(255,255,255,0.86);
  border:1px solid rgba(0,0,0,0.10);
  box-shadow:0 14px 28px rgba(0,0,0,0.16);
  display:flex;
  flex-direction:column;
  overflow:hidden;
  z-index:30;
  pointer-events:auto;
}
.chat-threads-panel.show{ display:flex; }

.threads-head{
  height:38px;
  display:flex;
  align-items:center;
  justify-content:flex-start;
  padding:0 10px;
  border-bottom:1px solid rgba(0,0,0,0.08);
}
.threads-title{
  font-weight:900;
  font-size:12px;
  color:rgba(0,0,0,0.55);
}
.threads-list{
  flex:1;
  overflow:auto;
  -webkit-overflow-scrolling:touch;
  padding:8px;
  display:flex;
  flex-direction:column;
  gap:6px;
}
.thread-item{
  width:100%;
  min-height:40px;
  border-radius:12px;
  border:1px solid rgba(0,0,0,0.08);
  background:rgba(255,255,255,0.82);
  padding:9px 8px;
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:8px;
  touch-action: manipulation;
}
.thread-item.active{
  border-color:rgba(99,26,173,0.38);
  box-shadow:0 8px 16px rgba(99,26,173,0.14);
}
.thread-title{
  font-weight:900;
  font-size:12px;
  color:rgba(0,0,0,0.6);
  overflow:hidden;
  text-overflow:ellipsis;
  white-space:nowrap;
  flex:1;
}

/* Mic language */
.mic-lang{
  position:absolute;
  left:485px;
  top:360px;
  width:40px;
  height:40px;
  pointer-events:auto;
  display:flex;
  align-items:center;
  justify-content:center;
  z-index:25;
}
.mic-lang-btn{
  width:40px;
  height:40px;
  border-radius:12px;
  border:1px solid rgba(0,0,0,0.12);
  background:rgba(255,255,255,0.75);
  font-weight:900;
  font-size:12px;
  color:rgba(0,0,0,0.65);
  touch-action: manipulation;
}
.mic-lang-menu{
  position:absolute;
  bottom:46px;
  left:0;
  width:72px;
  border-radius:14px;
  background:rgba(255,255,255,0.9);
  border:1px solid rgba(0,0,0,0.10);
  box-shadow:0 12px 24px rgba(0,0,0,0.16);
  display:none;
  overflow:hidden;
}
.mic-lang-menu.show{ display:block; }
.mic-lang-item{
  padding:10px 10px;
  font-weight:900;
  font-size:12px;
  color:rgba(0,0,0,0.65);
  touch-action: manipulation;
}
.mic-lang-item:hover{ background:rgba(99,26,173,0.08); }

.chat-icon img{ width:100%; height:100%; object-fit:contain; display:block; }

/* =========================================================
   ✅ QUIZ FRAMES (8/9/10)
   ========================================================= */
.frame-8, .frame-9, .frame-10, .frame-11, .frame-12, .frame-13, .frame-14{
  position:fixed;
  inset:0;
  width:100vw;
  height:100vh;
  overflow:hidden;
  display:none;
  background:url("Quiz_Background.png") center/cover no-repeat;
}

.quiz-stage{
  position:absolute;
  left:50%;
  top:50%;
  width:864px;
  height:444px;
  transform:translate(-50%, -50%) scale(var(--qs, 1));
  transform-origin:center center;
}

.quiz-back{
  position:absolute;
  left:15px;
  top:25px;
  width:40px;
  height:40px;
  opacity:0.65;
  touch-action: manipulation;
  z-index:10;
}
.quiz-back img{ width:100%; height:100%; object-fit:contain; display:block; }

.quiz-title{
  position:absolute;
  left:50%;
  top:35px;
  transform:translateX(-50%);
  font-weight:900;
  font-size:40px;
  line-height:1;
  background:linear-gradient(90deg, #79aaaa 0%, #96D7C6 100%);
  -webkit-background-clip:text;
  background-clip:text;
  color:transparent;
  -webkit-text-stroke:2px rgba(102,102,102,0.75);
  text-align:center;
  white-space:nowrap;
  pointer-events:none;
}

.quiz-panel{
  position:absolute;
  left:50%;
  top:110px;
  transform:translateX(-50%);
  width:740px;
  border-radius:18px;
  background:rgba(255,255,255,0.86);
  border:1px solid rgba(0,0,0,0.10);
  box-shadow:0 14px 28px rgba(0,0,0,0.16);
  padding:16px 16px 14px;
}

.quiz-row{
  display:flex;
  flex-direction:column;
  gap:6px;
  margin-bottom:12px;
}

.quiz-label{
  font-weight:900;
  font-size:12px;
  color:rgba(0,0,0,0.60);
}

.quiz-input{
  width:100%;
  height:40px;
  border:none;
  outline:none;
  background:rgba(255,255,255,0.9);
  border:1px solid rgba(0,0,0,0.10);
  border-radius:12px;
  padding:0 12px;
  font-weight:800;
  font-size:13px;
  color:rgba(0,0,0,0.65);
}

.quiz-grid{
  display:grid;
  grid-template-columns: 1fr 1fr;
  gap:12px;
}

.quiz-select{
  width:100%;
  height:40px;
  border:none;
  outline:none;
  background:rgba(255,255,255,0.9);
  border:1px solid rgba(0,0,0,0.10);
  border-radius:12px;
  padding:0 10px;
  font-weight:900;
  font-size:12px;
  color:rgba(0,0,0,0.65);
}

.quiz-primary{
  margin-top:12px;
  width:100%;
  height:44px;
  border:none;
  border-radius:14px;
  background:rgba(99,26,173,0.92);
  color:#fff;
  font-weight:900;
  font-size:13px;
  box-shadow:0 12px 22px rgba(99,26,173,0.18);
}

.quiz-secondary{
  height:40px;
  padding:0 14px;
  border-radius:12px;
  border:1px solid rgba(0,0,0,0.12);
  background:rgba(255,255,255,0.85);
  font-weight:900;
  font-size:12px;
  color:rgba(0,0,0,0.65);
}

.quiz-primary:disabled, .quiz-secondary:disabled{
  opacity:0.55;
  pointer-events:none;
}

.quiz-hint{
  margin-top:10px;
  font-weight:800;
  font-size:12px;
  color:rgba(0,0,0,0.48);
}

/* play */
.quiz-topbar{
  position:absolute;
  right:20px;
  top:25px;
  display:flex;
  gap:10px;
  z-index:10;
}
.quiz-pill{
  height:34px;
  padding:0 12px;
  border-radius:999px;
  border:1px solid rgba(0,0,0,0.12);
  background:rgba(255,255,255,0.82);
  display:flex;
  align-items:center;
  justify-content:center;
  font-weight:900;
  font-size:12px;
  color:rgba(0,0,0,0.65);
}

.quiz-card{
  position:absolute;
  left:50%;
  top:95px;
  transform:translateX(-50%);
  width:760px;
  height:310px;
  border-radius:18px;
  background:rgba(255,255,255,0.86);
  border:1px solid rgba(0,0,0,0.10);
  box-shadow:0 14px 28px rgba(0,0,0,0.16);
  padding:16px;
  display:flex;
  flex-direction:column;
  gap:12px;
}

.quiz-q{
  font-weight:900;
  font-size:16px;
  color:rgba(0,0,0,0.72);
}

.quiz-choices{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:10px;
  margin-top:4px;
}

.quiz-choice{
  min-height:44px;
  border-radius:14px;
  border:1px solid rgba(0,0,0,0.10);
  background:rgba(255,255,255,0.92);
  padding:10px 12px;
  font-weight:800;
  font-size:13px;
  color:rgba(0,0,0,0.70);
  text-align:left;
  line-height:1.2;
}

.quiz-choice.correct{
  border-color:rgba(40,167,69,0.35);
  box-shadow:0 10px 18px rgba(40,167,69,0.12);
}
.quiz-choice.wrong{
  border-color:rgba(220,53,69,0.35);
  box-shadow:0 10px 18px rgba(220,53,69,0.10);
}

.quiz-actions{
  display:flex;
  justify-content:flex-end;
}

.quiz-feedback{
  font-weight:900;
  font-size:12px;
  color:rgba(0,0,0,0.55);
  min-height:16px;
}

/* result */
.quiz-score{
  font-weight:900;
  font-size:22px;
  color:rgba(0,0,0,0.75);
  text-align:center;
  margin-top:6px;
}
.quiz-congrats{
  font-weight:900;
  font-size:18px;
  color:rgba(99,26,173,0.85);
  text-align:center;
  margin-top:6px;
}

.quiz-result-actions{
  display:flex;
  gap:10px;
  margin-top:14px;
}
.quiz-result-actions .quiz-secondary{ flex:1; }
.quiz-result-actions .quiz-primary{ flex:1; margin-top:0; }

/* scale */
@media (max-width: 900px){
  .quiz-panel{ width:92vw; }
  .quiz-card{ width:92vw; }
}

/* =========================================================
   ✅ GAME FRAMES (11/12/13/14) — reusing Quiz style
   ========================================================= */

.game-stage{
  position:absolute;
  left:50%;
  top:50%;
  width:864px;
  height:444px;
  transform:translate(-50%, -50%) scale(var(--gs, 1));
  transform-origin:center center;
}

.game-back{
  position:absolute;
  left:15px;
  top:25px;
  width:40px;
  height:40px;
  opacity:0.65;
  touch-action: manipulation;
  z-index:10;
}
.game-back img{ width:100%; height:100%; object-fit:contain; display:block; }

.game-title{
  position:absolute;
  left:50%;
  top:35px;
  transform:translateX(-50%);
  font-weight:900;
  font-size:40px;
  line-height:1;
  background:linear-gradient(90deg, #79aaaa 0%, #96D7C6 100%);
  -webkit-background-clip:text;
  background-clip:text;
  color:transparent;
  -webkit-text-stroke:2px rgba(102,102,102,0.75);
  text-align:center;
  white-space:nowrap;
  pointer-events:none;
}

.game-panel{
  position:absolute;
  left:50%;
  top:110px;
  transform:translateX(-50%);
  width:740px;
  border-radius:18px;
  background:rgba(255,255,255,0.86);
  border:1px solid rgba(0,0,0,0.10);
  box-shadow:0 14px 28px rgba(0,0,0,0.16);
  padding:16px 16px 14px;
}

.game-row{
  display:flex;
  flex-direction:column;
  gap:6px;
  margin-bottom:12px;
}

.game-label{
  font-weight:900;
  font-size:12px;
  color:rgba(0,0,0,0.60);
}

.game-select{
  width:100%;
  height:40px;
  border:none;
  outline:none;
  background:rgba(255,255,255,0.9);
  border:1px solid rgba(0,0,0,0.10);
  border-radius:12px;
  padding:0 10px;
  font-weight:900;
  font-size:12px;
  color:rgba(0,0,0,0.65);
}

.game-input{
  width:100%;
  height:42px;
  border:none;
  outline:none;
  background:rgba(255,255,255,0.9);
  border:1px solid rgba(0,0,0,0.10);
  border-radius:12px;
  padding:0 12px;
  font-weight:900;
  font-size:13px;
  color:rgba(0,0,0,0.65);
}

.game-primary{
  margin-top:12px;
  width:100%;
  height:44px;
  border:none;
  border-radius:14px;
  background:rgba(99,26,173,0.92);
  color:#fff;
  font-weight:900;
  font-size:13px;
  box-shadow:0 12px 22px rgba(99,26,173,0.18);
}

.game-secondary{
  height:40px;
  padding:0 14px;
  border-radius:12px;
  border:1px solid rgba(0,0,0,0.12);
  background:rgba(255,255,255,0.85);
  font-weight:900;
  font-size:12px;
  color:rgba(0,0,0,0.65);
}

.game-hint{
  margin-top:10px;
  font-weight:800;
  font-size:12px;
  color:rgba(0,0,0,0.48);
}

.game-topbar{
  position:absolute;
  right:20px;
  top:25px;
  display:flex;
  gap:10px;
  z-index:10;
}
.game-pill{
  height:34px;
  padding:0 12px;
  border-radius:999px;
  border:1px solid rgba(0,0,0,0.12);
  background:rgba(255,255,255,0.82);
  display:flex;
  align-items:center;
  justify-content:center;
  font-weight:900;
  font-size:12px;
  color:rgba(0,0,0,0.65);
}

.game-card{
  position:absolute;
  left:50%;
  top:95px;
  transform:translateX(-50%);
  width:760px;
  height:310px;
  border-radius:18px;
  background:rgba(255,255,255,0.86);
  border:1px solid rgba(0,0,0,0.10);
  box-shadow:0 14px 28px rgba(0,0,0,0.16);
  padding:16px;
  display:flex;
  flex-direction:column;
  gap:12px;
}

.game-actions{
  display:flex;
  gap:10px;
  justify-content:flex-end;
}

.game-feedback{
  font-weight:900;
  font-size:12px;
  color:rgba(0,0,0,0.55);
  min-height:16px;
}

/* Toggles (mode + side) */
.game-toggle{
  display:flex;
  gap:10px;
}
.toggle-btn{
  flex:1;
  height:40px;
  border-radius:12px;
  border:1px solid rgba(0,0,0,0.12);
  background:rgba(255,255,255,0.85);
  font-weight:900;
  font-size:12px;
  color:rgba(0,0,0,0.65);
  touch-action: manipulation;
}
.toggle-btn.active{
  border-color:rgba(99,26,173,0.38);
  box-shadow:0 10px 18px rgba(99,26,173,0.12);
}

/* Word Scramble */
.scramble-word{
  font-weight:900;
  font-size:32px;
  color:rgba(0,0,0,0.72);
  text-align:center;
  letter-spacing:6px;
  margin-top:6px;
}
.scramble-hint{
  font-weight:900;
  font-size:12px;
  color:rgba(0,0,0,0.55);
  text-align:center;
}

/* Tic Tac Toe */
.ttt-grid{
  width:100%;
  flex:1;
  display:grid;
  grid-template-columns:repeat(3, 1fr);
  gap:10px;
  margin-top:8px;
}
.ttt-cell{
  height:82px;
  border-radius:16px;
  border:1px solid rgba(0,0,0,0.12);
  background:rgba(255,255,255,0.92);
  font-weight:900;
  font-size:32px;
  color:rgba(0,0,0,0.75);
  touch-action: manipulation;
}
.ttt-cell:disabled{
  opacity:0.65;
}

/* scale */
@media (max-width: 900px){
  .game-panel{ width:92vw; }
  .game-card{ width:92vw; }
}

.pin-badge{
  position:absolute;
  top:0;
  left:0;
  width:35px;          /* ✅ 35x35 */
  height:35px;         /* ✅ 35x35 */
  transform: translate(-50%, -50%); /* center ไปทับมุม */
  pointer-events:none;
  z-index:5;
}



/* =========================
   FRAME 15: Fruit Slash (Camera Game)
   ========================= */

.frame-15{
  position:relative;
  width:100%;
  height:100%;
  overflow:hidden;
  background:#000;
}

.fruit-container{
  position:absolute;
  inset:0;
}

#fruitVideo{
  position:absolute;
  inset:0;
  width:100%;
  height:100%;
  object-fit:cover;
  transform: scaleX(-1); /* mirror for selfie view */
}

#fruitCanvas{
  position:absolute;
  inset:0;
  width:100%;
  height:100%;
  pointer-events:auto;
}

.fruit-back{
  position:absolute;
  top:18px;
  left:18px;
  z-index:50;
  background:transparent;
  border:none;
  padding:0;
  width:56px;
  height:56px;
}

.fruit-back img{
  width:100%;
  height:100%;
  object-fit:contain;
}

.fruit-hud{
  position:absolute;
  top:18px;
  left:50%;
  transform:translateX(-50%);
  z-index:40;
  display:flex;
  gap:10px;
  align-items:center;
  padding:10px 12px;
  border-radius:16px;
  background:rgba(0,0,0,0.35);
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
  color:#fff;
  font-weight:700;
}

.fruit-timer{
  min-width:72px;
  text-align:center;
  font-size:18px;
}

.fruit-score, .fruit-score2, .fruit-best{
  font-size:14px;
  white-space:nowrap;
  opacity:0.95;
}

.fruit-score2{
  display:none; /* shown in 2P */
}

.fruit-overlay, .fruit-end{
  position:absolute;
  inset:0;
  z-index:45;
  display:flex;
  align-items:center;
  justify-content:center;
  padding:18px;
  background:rgba(0,0,0,0.45);
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
}

.fruit-panel{
  width:min(520px, 92vw);
  border-radius:26px;
  padding:18px 16px;
  background:rgba(255,255,255,0.92);
  box-shadow: 0 12px 26px rgba(0,0,0,0.22);
  text-align:center;
}

.fruit-title{
  font-size:26px;
  font-weight:900;
  color:rgba(99,26,173,0.92);
  margin-bottom:8px;
}

.fruit-sub{
  font-size:14px;
  font-weight:600;
  color:rgba(0,0,0,0.68);
  margin-bottom:14px;
  line-height:1.25;
}

.fruit-mode{
  display:flex;
  gap:10px;
  justify-content:center;
  margin-bottom:12px;
}

.fruit-mode-btn{
  flex:1;
  max-width:160px;
}

.fruit-mode-btn.active{
  background:rgba(99,26,173,0.92);
  color:#fff;
}

.fruit-hint{
  margin-top:12px;
  font-size:12px;
  font-weight:600;
  color:rgba(0,0,0,0.55);
}

.fruit-result, .fruit-bestline{
  font-size:18px;
  font-weight:800;
  margin:10px 0;
  color:rgba(0,0,0,0.75);
}



/* =========================================================
   FRUIT SLASH (Frame 15) — New "Web 2" UI (vanilla JS)
   ========================================================= */

.fruit2{
  position: absolute;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
}

.fruit2-menu{
  position: absolute;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 16px;
}

.fruit2-card{
  width: min(520px, 92vw);
  background: rgba(255,255,255,0.92);
  border: 1px solid rgba(0,0,0,0.10);
  box-shadow: 0 14px 34px rgba(0,0,0,0.18);
  border-radius: 20px;
  padding: 18px 18px 16px;
  backdrop-filter: blur(8px);
}

.fruit2-title{
  font-size: 26px;
  font-weight: 900;
  letter-spacing: 0.2px;
  margin-bottom: 6px;
}

.fruit2-sub{
  font-size: 13px;
  opacity: 0.78;
  line-height: 1.35;
  margin-bottom: 12px;
}

.fruit2-row{
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
  margin: 10px 0;
}

.fruit2-row-tight{
  margin-top: 14px;
}

.fruit2-label{
  font-weight: 700;
  font-size: 13px;
  opacity: 0.85;
  width: 90px;
}

.fruit2-seg{
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
  justify-content: flex-end;
}

.fruit2-seg-btn{
  border: 1px solid rgba(0,0,0,0.14);
  background: rgba(255,255,255,0.8);
  padding: 10px 12px;
  border-radius: 999px;
  font-weight: 800;
  font-size: 12px;
  letter-spacing: 0.2px;
  cursor: pointer;
  -webkit-tap-highlight-color: transparent;
}

.fruit2-seg-btn.active{
  background: rgba(99,26,173,0.92);
  color: white;
  border-color: rgba(99,26,173,0.92);
}

.fruit2-primary{
  flex: 1;
  border: 0;
  background: rgba(99,26,173,0.92);
  color: white;
  padding: 12px 14px;
  border-radius: 14px;
  font-weight: 900;
  cursor: pointer;
  box-shadow: 0 10px 22px rgba(99,26,173,0.30);
}

.fruit2-ghost{
  border: 1px solid rgba(0,0,0,0.14);
  background: rgba(255,255,255,0.85);
  padding: 12px 14px;
  border-radius: 14px;
  font-weight: 900;
  cursor: pointer;
}

.fruit2-tip{
  margin-top: 10px;
  font-size: 12px;
  opacity: 0.75;
}

.fruit2-error{
  margin-top: 10px;
  padding: 10px 12px;
  border-radius: 12px;
  background: rgba(255, 59, 48, 0.10);
  border: 1px solid rgba(255, 59, 48, 0.25);
  color: rgba(0,0,0,0.86);
  font-weight: 700;
  font-size: 12px;
}

.fruit2-play{
  position: absolute;
  inset: 0;
  overflow: hidden;
}

/* Ensure canvas covers frame */
#fruitVideo{
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  object-fit: cover;
  transform: scaleX(-1);
}

#fruitCanvas{
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
}
